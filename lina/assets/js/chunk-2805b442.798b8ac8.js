(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2805b442"],{1:function(e,t){},"3cc2":function(e,t,i){},"82a0":function(e,t,i){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.open("/#/ops/celery/task/".concat(e,"/log/?type=").concat(t),"","width=900,height=600")}i.d(t,"a",(function(){return a}))},c0eb:function(e,t,i){"use strict";var a=i("1157"),r=i.n(a);window.$=r.a,window.jQuery=r.a,t["a"]=r.a},ce4b:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-tree",e._b({attrs:{data:e.iData,"show-checkbox":"","node-key":"id","default-expand-all":!1,"default-checked-keys":e.value,props:e.defaultProps},on:{check:e.handleCheckChange}},"el-tree",e.$attrs,!1))},r=[],o=(i("6762"),i("2fdb"),i("ac4d"),i("8a81"),i("ac6a"),i("6d67"),{name:"PermissionFormActionField",props:{value:{type:Array,default:function(){return[]}},choices:{type:Array,default:function(){return[]}}},data:function(){return{defaultProps:{children:"children",label:"label"},fullChoicesTreeNodes:[{id:"all",label:this.$t("perms.all"),children:[{id:"connect",label:this.$t("perms.connect")},{id:"updownload",label:this.$t("perms.upDownload"),children:[{id:"upload_file",label:this.$t("perms.uploadFile")},{id:"download_file",label:this.$t("perms.downloadFile")}]},{id:"clipboard_copy_paste",label:this.$t("perms.clipboardCopyPaste"),children:[{id:"clipboard_copy",label:this.$t("perms.clipboardCopy")},{id:"clipboard_paste",label:this.$t("perms.clipboardPaste")}]}]}]}},computed:{choicesIDs:function(){return this.choices.map((function(e){return e.value}))},iData:function(){this.$log.debug("choices: ",this.choicesIDs);var e=_.cloneDeep(this.fullChoicesTreeNodes),t=this.trimChoicesTreeNodes(e);return this.$log.debug("choicesTreeNodes: ",t),t}},methods:{trimChoicesTreeNodes:function(e){var t=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var n=o.value;if(this.choicesIDs.includes(n.id)){var l=n.children||[];0!==l.length&&(l=this.trimChoicesTreeNodes(l),n.children=l),t.push(n)}}}catch(c){a=!0,r=c}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return t},handleCheckChange:function(e,t){var i=t.checkedKeys;0!==i.length&&i.push("connect"),this.$emit("input",i)}}}),s=o,n=i("2877"),l=Object(n["a"])(s,a,r,!1,null,"8efe94e0",null);t["a"]=l.exports},da8f:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("GenericCreateUpdatePage",{ref:"createUpdatePage",attrs:{initial:e.initial,fields:e.fields,"fields-meta":e.fieldsMeta,url:e.url}})},r=[],o=(i("d92a"),i("7f7f"),i("8ea5"),i("cd4a")),s=i("cf45"),n=i("ce4b"),l=i("2af9"),c={components:{GenericCreateUpdatePage:o["d"]},data:function(){var e=this;return{initial:{is_active:!0,date_start:(new Date).toISOString(),date_expired:Object(s["g"])(1095,new Date).toISOString(),type:this.$route.query.type,category:this.$route.query.category},fields:[[this.$t("common.Basic"),["name"]],[this.$t("perms.User"),["users","user_groups"]],[this.$t("assets.Applications"),["category","type","applications","system_users"]],[this.$t("common.action"),["actions"]],[this.$t("common.Other"),["is_active","is_custom_valid_period","input_valid_period","date_start","date_expired","comment"]]],url:"/api/v1/perms/application-permissions/?category=".concat(this.$route.query.category,"&type=").concat(this.$route.query.type),fieldsMeta:{users:{el:{value:[],ajax:{url:"/api/v1/users/users/?fields_size=mini",transformOption:function(e){return{label:e.name+"("+e.username+")",value:e.id}}}}},user_groups:{el:{value:[],url:"/api/v1/users/groups/"}},category:{type:"select",disabled:!0},type:{type:"select",disabled:!0},applications:{label:this.$t("assets.Applications"),el:{value:[],ajax:{url:"/api/v1/applications/applications/?category=".concat(this.$route.query.category,"&type=").concat(this.$route.query.type),transformOption:function(e){return{label:e.name+" ("+e.type_display+")",value:e.id}}}}},system_users:{el:{value:[],ajax:{url:function(){var e="/api/v1/assets/system-users/",t=this.$route.query.type;return"remote_app"===this.$route.query.category?e+="?protocol=rdp":t&&(e+="?protocol=".concat(t)),e}.bind(this)(),transformOption:function(t){if("k8s"===e.$route.query.type)return{label:t.name,value:t.id};var i=t.username||"*";return{label:t.name+"("+i+")",value:t.id}}}}},is_custom_valid_period:{label:this.$t("common.CustomValidityPeriod"),type:"switch"},input_valid_period:{label:this.$t("common.ValidPeriod"),component:l["k"],el:{multiple:!1,placeholder:"默认三年",value:[],ajax:{url:"/api/v1/perms/period-of-validity/",transformOption:function(e){return{label:e.label,value:e.value}}}},hidden:function(e){return e.is_custom_valid_period}},date_start:{label:this.$t("common.dateStart"),hidden:function(e){return!e.is_custom_valid_period}},date_expired:{label:this.$t("common.dateExpired"),hidden:function(e){return!e.is_custom_valid_period}},actions:{label:this.$t("perms.Actions"),component:n["a"],helpText:this.$t("common.actionsTips")},is_active:{type:"checkbox"}}}}},u=c,d=i("2877"),p=Object(d["a"])(u,a,r,!1,null,"0a1efa6c",null);t["default"]=p.exports}}]);