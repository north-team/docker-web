(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ecc0138e"],{1:function(t,e){},"3cc2":function(t,e,a){},"4f7f":function(t,e,a){"use strict";var n=a("c26b"),s=a("b39a"),i="Set";t.exports=a("e0b8")(i,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(s(this,i),t=0===t?0:t,t)}},n)},"82a0":function(t,e,a){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.open("/#/ops/celery/task/".concat(t,"/log/?type=").concat(e),"","width=900,height=600")}a.d(e,"a",(function(){return n}))},b39a:function(t,e,a){var n=a("d3f4");t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},c0eb:function(t,e,a){"use strict";var n=a("1157"),s=a.n(n);window.$=s.a,window.jQuery=s.a,e["a"]=s.a},c26b:function(t,e,a){"use strict";var n=a("86cc").f,s=a("2aeb"),i=a("dcbc"),r=a("9b43"),o=a("f605"),c=a("4a59"),u=a("01f9"),l=a("d53b"),h=a("7a56"),p=a("9e1e"),f=a("67ab").fastKey,d=a("b39a"),m=p?"_s":"size",b=function(t,e){var a,n=f(e);if("F"!==n)return t._i[n];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,u){var l=t((function(t,n){o(t,l,e,"_i"),t._t=e,t._i=s(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=n&&c(n,a,t[u],t)}));return i(l.prototype,{clear:function(){for(var t=d(this,e),a=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete a[n.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var a=d(this,e),n=b(a,t);if(n){var s=n.n,i=n.p;delete a._i[n.i],n.r=!0,i&&(i.n=s),s&&(s.p=i),a._f==n&&(a._f=s),a._l==n&&(a._l=i),a[m]--}return!!n},forEach:function(t){d(this,e);var a,n=r(t,arguments.length>1?arguments[1]:void 0,3);while(a=a?a.n:this._f){n(a.v,a.k,this);while(a&&a.r)a=a.p}},has:function(t){return!!b(d(this,e),t)}}),p&&n(l.prototype,"size",{get:function(){return d(this,e)[m]}}),l},def:function(t,e,a){var n,s,i=b(t,e);return i?i.v=a:(t._l=i={i:s=f(e,!0),k:e,v:a,p:n=t._l,n:void 0,r:!1},t._f||(t._f=i),n&&(n.n=i),t[m]++,"F"!==s&&(t._i[s]=i)),t},getEntry:b,setStrong:function(t,e,a){u(t,e,(function(t,a){this._t=d(t,e),this._k=a,this._l=void 0}),(function(){var t=this,e=t._k,a=t._l;while(a&&a.r)a=a.p;return t._t&&(t._l=a=a?a.n:t._t._f)?l(0,"keys"==e?a.k:"values"==e?a.v:[a.k,a.v]):(t._t=void 0,l(1))}),a?"entries":"values",!a,!0),h(e)}}},d0d9:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("GenericDetailPage",t._b({attrs:{object:t.plan,"active-menu":t.config.activeMenu},on:{"update:object":function(e){t.plan=e},"update:activeMenu":function(e){return t.$set(t.config,"activeMenu",e)},"update:active-menu":function(e){return t.$set(t.config,"activeMenu",e)}}},"GenericDetailPage",t.config,!1),[a("keep-alive",[a(t.config.activeMenu,{tag:"component",attrs:{object:t.plan}})],1)],1)},s=[],i=a("cd4a"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:14,sm:24}},[a("GenericListTable",{ref:"listTable",attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}})],1),t._v(" "),a("el-col",{attrs:{md:10,sm:24}},[a("RelationCard",t._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",t.systemuserRelationConfig,!1))],1)],1)},o=[],c=a("75fc"),u=(a("ac6a"),a("4f7f"),a("5df3"),a("1c4c"),a("6d67"),a("7f7f"),a("d92a"),a("3758")),l=a("58fd"),h=a("e975"),p={name:"ChangeAuthPlanDatabase",components:{GenericListTable:u["a"],RelationCard:l["a"]},props:{object:{type:Object,required:!0,default:function(){return{}}}},data:function(){var t=this;return{tableConfig:{url:"/api/v1/xpack/change-auth-plan/app-plan/".concat(this.object.id,"/systemusers/"),columns:["name","username","delete_action"],columnsMeta:{name:{formatter:h["g"],formatterArgs:{route:"SystemUserDetail"}},delete_action:{prop:"id",label:this.$t("common.Actions"),align:"center",width:150,objects:this.object.system_users,formatter:h["f"],onDelete:function(t,e,a,n){var s=this;this.$axios.patch("/api/v1/xpack/change-auth-plan/app-plan/".concat(this.object.id,"/systemusers/?action=remove"),{system_users:[e.id]}).then((function(t){s.$message.success(s.$t("common.deleteSuccessMsg")),n()})).catch((function(t){s.$message.error(s.$t("common.deleteErrorMsg")+" "+t)}))}.bind(this)}},tableAttrs:{border:!1}},headerActions:{hasSearch:!0,hasRefresh:!0,hasLeftActions:!0,hasRightActions:!0,hasExport:!1,hasImport:!1,hasCreate:!1,hasMoreActions:!1},systemuserRelationConfig:{icon:"fa-edit",title:this.$t("xpack.ChangeAuthPlan.AddSystemUser"),objectsAjax:{url:"/api/v1/assets/system-users/?protocol=".concat(this.object.type),transformOption:function(t){return{label:t.name+"("+t.username+")",value:t.id}}},showHasObjects:!1,performAdd:function(e,a){var n="/api/v1/xpack/change-auth-plan/app-plan/".concat(t.object.id,"/systemusers/?action=add"),s=e.map((function(t){return t.value})),i=a.iHasObjects.map((function(t){return t.value})),r={system_users:Array.from(new Set([].concat(Object(c["a"])(i),Object(c["a"])(s))))};return t.$axios.patch(n,r)},onAddSuccess:function(e,a){a.iHasObjects=[].concat(Object(c["a"])(a.iHasObjects),Object(c["a"])(e)),a.$refs.select2.clearSelected(),t.$message.success(t.$t("common.updateSuccessMsg")),window.location.reload(),t.$refs.listTable.$refs.ListTable.reloadTable()}}}}},f=p,d=a("2877"),m=Object(d["a"])(f,r,o,!1,null,"0677bad7",null),b=m.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:14,sm:24}},[a("DetailCard",{attrs:{items:t.detailItems}})],1),t._v(" "),a("el-col",{attrs:{md:10,sm:24}},[a("QuickActions",{attrs:{actions:t.quickActions,type:"primary"}})],1)],1)},v=[],y=a("2af9"),_=a("cf45"),A={name:"AppChangeAuthPlanInfo",components:{DetailCard:y["f"],QuickActions:y["j"]},props:{object:{type:Object,required:!0,default:function(){return{}}}},data:function(){return{quickActions:[{title:this.$t("xpack.ChangeAuthPlan.ManualExecutePlan"),attrs:{type:"primary",label:this.$t("xpack.ChangeAuthPlan.Execute")},callbacks:{click:function(){this.$axios.post("/api/v1/xpack/change-auth-plan/app-plan-execution/",{plan:this.object.id}).then((function(t){window.open("/#/ops/celery/task/".concat(t.task,"/log/"),"_blank","toolbar=yes, width=900, height=600")}))}.bind(this)}}]}},computed:{detailItems:function(){var t=this,e=this.$createElement;return[{key:this.$t("xpack.ChangeAuthPlan.Name"),value:this.object.name},{key:this.$t("xpack.ChangeAuthPlan.SystemUser"),value:this.object.systemuser_display},{key:this.$t("xpack.ChangeAuthPlan.PasswordStrategy"),value:this.object.password_strategy_display},{key:this.$t("xpack.ChangeAuthPlan.RegularlyPerform"),value:this.object.crontab,formatter:function(a,n){return e("span",[t.object.is_periodic?n:""])}},{key:this.$t("xpack.ChangeAuthPlan.CyclePerform"),value:this.object.interval,formatter:function(a,n){return e("span",[t.object.is_periodic?n:""])}},{key:this.$t("xpack.ChangeAuthPlan.DateJoined"),value:Object(_["q"])(this.object.date_created)},{key:this.$t("xpack.ChangeAuthPlan.DateUpdated"),value:Object(_["q"])(this.object.date_updated)},{key:this.$t("common.Comment"),value:this.object.comment}]}}},k=A,x=Object(d["a"])(k,g,v,!1,null,"5d8d6e50",null),w=x.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("GenericListTable",{attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}})},$=[],j={name:"AppChangeAuthPlanExecutionList",components:{GenericListTable:u["a"]},props:{object:{type:Object,required:!0,default:function(){return{}}}},data:function(){var t=this.$createElement;return{tableConfig:{url:"/api/v1/xpack/change-auth-plan/app-plan-execution/?plan_id=".concat(this.object.id),columns:["username","result_summary","password_strategy_display","timedelta","trigger_display","apps_amount","system_users_amount","date_start","actions"],columnsShow:{min:["actions"],default:["username","password_strategy_display","timedelta","trigger_display","date_start","actions","result_summary"]},columnsMeta:{username:{label:this.$t("xpack.ChangeAuthPlan.Username")},apps_amount:{label:this.$t("xpack.ChangeAuthPlan.AppAmount")},system_users_amount:{label:this.$t("xpack.ChangeAuthPlan.SystemUserAmount")},systemusers:{label:this.$t("xpack.ChangeAuthPlan.SystemUser")},result_summary:{label:this.$t("xpack.ChangeAuthPlan.Result"),width:"80px",showOverflowTooltip:!0,formatter:function(e){var a=t("div",[t("span",{class:"text-primary"},[e.result_summary.succeed]),"/",t("span",{class:"text-danger"},[e.result_summary.failed]),"/",t("span",[e.result_summary.total])]);return a}},password_strategy_display:{label:this.$t("xpack.ChangeAuthPlan.PasswordStrategy"),width:"220px",showOverflowTooltip:!0},timedelta:{label:this.$t("xpack.ChangeAuthPlan.TimeDelta"),width:"90px",formatter:function(t){return t.timedelta.toFixed(2)+"s"}},date_start:{showOverflowTooltip:!0},actions:{formatterArgs:{hasDelete:!1,hasUpdate:!1,hasClone:!1,extraActions:[{name:"log",type:"primary",title:this.$t("xpack.ChangeAuthPlan.Log"),callback:function(t){var e=t.row;window.open("/#/ops/celery/task/".concat(e.id,"/log/"),"_blank","toolbar=yes, width=900, height=600")}},{name:"detail",title:this.$t("xpack.ChangeAuthPlan.Detail"),type:"info",callback:function(t){var e=t.row;return this.$router.push({name:"AppChangeAuthPlanExecutionDetail",params:{id:e.id}})}}]}}}},headerActions:{hasSearch:!0,hasRefresh:!0,hasRightActions:!0,hasLeftActions:!0,hasMoreActions:!1,hasExport:!1,hasImport:!1,hasCreate:!1,hasBulkDelete:!1,hasBulkUpdate:!1}}}},P=j,E=Object(d["a"])(P,C,$,!1,null,"4110a51b",null),O=E.exports,S={name:"AppChangeAuthPlanDetail",components:{GenericDetailPage:i["e"],ChangeAuthPlanDatabase:b,AppChangeAuthPlanInfo:w,AppChangeAuthPlanExecutionList:O},data:function(){var t=this,e=this;return{plan:{name:"",comment:""},config:{activeMenu:"AppChangeAuthPlanInfo",submenu:[{title:this.$t("common.BasicInfo"),name:"AppChangeAuthPlanInfo"},{title:this.$t("xpack.ChangeAuthPlan.SystemUser"),name:"ChangeAuthPlanDatabase"},{title:this.$t("xpack.ChangeAuthPlan.ExecutionList"),name:"AppChangeAuthPlanExecutionList"}],actions:{updateCallback:function(){var a=t.$route.params.id,n="AppChangeAuthPlanUpdate";t.$router.push({name:n,params:{id:a},query:{category:e.plan.category.toLowerCase(),type:e.plan.type.toLowerCase()}})}}}}}},D=S,L=Object(d["a"])(D,n,s,!1,null,"5d8605ba",null);e["default"]=L.exports},e0b8:function(t,e,a){"use strict";var n=a("7726"),s=a("5ca1"),i=a("2aba"),r=a("dcbc"),o=a("67ab"),c=a("4a59"),u=a("f605"),l=a("d3f4"),h=a("79e5"),p=a("5cc5"),f=a("7f20"),d=a("5dbc");t.exports=function(t,e,a,m,b,g){var v=n[t],y=v,_=b?"set":"add",A=y&&y.prototype,k={},x=function(t){var e=A[t];i(A,t,"delete"==t||"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,a){return e.call(this,0===t?0:t,a),this})};if("function"==typeof y&&(g||A.forEach&&!h((function(){(new y).entries().next()})))){var w=new y,C=w[_](g?{}:-0,1)!=w,$=h((function(){w.has(1)})),j=p((function(t){new y(t)})),P=!g&&h((function(){var t=new y,e=5;while(e--)t[_](e,e);return!t.has(-0)}));j||(y=e((function(e,a){u(e,y,t);var n=d(new v,e,y);return void 0!=a&&c(a,b,n[_],n),n})),y.prototype=A,A.constructor=y),($||P)&&(x("delete"),x("has"),b&&x("get")),(P||C)&&x(_),g&&A.clear&&delete A.clear}else y=m.getConstructor(e,t,b,_),r(y.prototype,a),o.NEED=!0;return f(y,t),k[t]=y,s(s.G+s.W+s.F*(y!=v),k),g||m.setStrong(y,t,b),y}}}]);