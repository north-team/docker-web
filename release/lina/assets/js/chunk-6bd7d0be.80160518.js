(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6bd7d0be"],{1:function(t,e){},"2dc2":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("GenericDetailPage",t._g(t._b({attrs:{object:t.TaskDetail,"active-menu":t.config.activeMenu},on:{"update:object":function(e){t.TaskDetail=e},"update:activeMenu":function(e){return t.$set(t.config,"activeMenu",e)},"update:active-menu":function(e){return t.$set(t.config,"activeMenu",e)}}},"GenericDetailPage",t.config,!1),t.$listeners),[s("keep-alive",[s(t.config.activeMenu,{tag:"component",attrs:{object:t.TaskDetail}})],1)],1)},i=[],o=s("cd4a"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:14}},[s("DetailCard",{attrs:{items:t.detailCardItems}})],1),t._v(" "),s("el-col",{attrs:{span:10}},[s("QuickActions",{attrs:{type:"primary",actions:t.quickActions}}),t._v(" "),s("RelationCard",t._b({ref:"NodeRelation",staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",t.nodeRelationConfig,!1)),t._v(" "),s("LabelCard",t._b({staticStyle:{"margin-top":"15px"},attrs:{type:"warning"}},"LabelCard",t.labelConfig,!1))],1)],1)},r=[],c=(s("6b54"),s("87b3"),s("6d67"),s("d92a"),s("b97b")),l=s("58fd"),u=s("8c34"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("IBox",t._b({attrs:{fa:"fa-info-circle",title:t.title}},"IBox",t.$attrs,!1),[s("div",{staticClass:"quick-actions"},[0===t.iLabels.length?s("p",[t._v(t._s(t.$t("common.Nothing")))]):t._e(),t._v(" "),t._l(t.iLabels,(function(e){return s("el-tag",{key:e.name+e.value,attrs:{type:"info"}},[t._v(t._s(e.name)+":"+t._s(e.value))])}))],2)])},p=[],h=(s("57e7"),s("e67a")),b={name:"",components:{IBox:h["a"]},props:{title:{type:String,default:function(){return this.$t("assets.Label")}},labels:{type:Array,default:function(){return[]}}},data:function(){return{iLabels:[]}},mounted:function(){var t=this;this.$axios.get("/api/v1/assets/labels/").then((function(e){for(var s in e)t.labels.indexOf(e[s].id)>-1&&t.iLabels.push(e[s])}))}},d=b,f=s("2877"),v=Object(f["a"])(d,m,p,!1,null,"8f27d41c",null),y=v.exports,g=s("cf45"),_=s("82a0"),$={name:"Detail",components:{DetailCard:c["a"],QuickActions:u["a"],RelationCard:l["a"],LabelCard:y},props:{object:{type:Object,default:function(){}}},data:function(){var t=this;return{quickActions:[{title:this.$t("assets.IsActive"),type:"switcher",attrs:{label:this.$t("common.Test"),model:this.object.is_active},callbacks:{change:function(t){var e=this;this.$axios.patch("/api/v1/assets/assets/".concat(this.object.id,"/"),{is_active:t}).then((function(t){e.$message.success(e.$t("common.updateSuccessMsg"))})).catch((function(t){e.$message.error(e.$t("common.updateErrorMsg "+t))}))}.bind(this)}},{title:this.$t("assets.RefreshHardware"),attrs:{type:"primary",label:this.$t("assets.Refresh")},callbacks:{click:function(){this.$axios.post("/api/v1/assets/assets/".concat(this.object.id,"/tasks/"),{action:"refresh"}).then((function(t){Object(_["a"])(t["task"])}))}.bind(this)}},{title:this.$t("assets.TestAssetsConnective"),attrs:{type:"primary",label:this.$t("assets.Test")},callbacks:{click:function(){this.$axios.post("/api/v1/assets/assets/".concat(this.object.id,"/tasks/"),{action:"test"}).then((function(t){Object(_["a"])(t["task"])}))}.bind(this)}}],nodeRelationConfig:{icon:"fa-info",title:this.$t("assets.Node"),objectsAjax:{url:"/api/v1/assets/nodes/",transformOption:function(t){return{label:t.full_value,value:t.id}}},hasObjectsId:this.object.nodes,performAdd:function(e){var s=[],a=t.$refs.NodeRelation.iHasObjects;a.map((function(t){s.push(t.value)}));var i="/api/v1/assets/assets/".concat(t.object.id,"/");return e.map((function(t){s.push(t.value)})),t.$axios.patch(i,{nodes:s})},performDelete:function(e){var s=e.value,a=[],i=t.$refs.NodeRelation.iHasObjects;i.map((function(t){t.value!==s&&a.push(t.value)}));var o="/api/v1/assets/assets/".concat(t.object.id,"/");return t.$axios.patch(o,{nodes:a})}},labelConfig:{title:this.$t("assets.Label"),labels:this.object.labels}}},computed:{detailCardItems:function(){return[{key:this.$t("assets.Hostname"),value:this.object.hostname},{key:this.$t("assets.ip"),value:this.object.ip},{key:this.$t("assets.Protocols"),value:this.object.protocols.toString()},{key:this.$t("assets.PublicIp"),value:this.object.public_ip},{key:this.$t("assets.AdminUser"),value:this.object.admin_user_display},{key:this.$t("assets.Domain"),value:this.object.domain_display},{key:this.$t("assets.Vendor"),value:this.object.vendor},{key:this.$t("assets.Model"),value:this.object.model},{key:this.$t("assets.Cpu"),value:this.object.cpu_model},{key:this.$t("assets.Memory"),value:this.object.memory},{key:this.$t("assets.Disk"),value:this.object.disk_info},{key:this.$t("assets.Platform"),value:this.object.platform},{key:this.$t("assets.Os"),value:this.object.os_arch},{key:this.$t("assets.IsActive"),value:this.object.is_active},{key:this.$t("assets.SerialNumber"),value:this.object.sn},{key:this.$t("assets.AssetNumber"),value:this.object.number},{key:this.$t("assets.DateJoined"),value:Object(g["q"])(this.object.date_created)},{key:this.$t("assets.CreatedBy"),value:this.object.created_by},{key:this.$t("assets.Comment"),value:this.object.comment}]}},mounted:function(){},methods:{}},k=$,j=Object(f["a"])(k,n,r,!1,null,"4bece7b8",null),w=j.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:16}},[s("AccountListTable",{ref:"ListTable",attrs:{url:t.assetUserUrl,"has-import":!1,"has-clone":!1}})],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("QuickActions",{attrs:{type:"primary",actions:t.quickActions}})],1)],1)],1)},C=[],T=s("2af9"),x={name:"Detail",components:{AccountListTable:T["a"],QuickActions:u["a"]},props:{object:{type:Object,default:function(){}}},data:function(){return{assetUserUrl:"/api/v1/assets/accounts/?asset=".concat(this.object.id),quickActions:[{title:this.$t("assets.TestAssetsConnective"),attrs:{type:"primary",label:this.$t("assets.Test")},callbacks:{click:function(){this.$axios.post("/api/v1/assets/accounts/tasks/?asset=".concat(this.object.id),{action:"test"}).then((function(t){Object(_["a"])(t["task"])}))}.bind(this)}}]}}},D=x,L=Object(f["a"])(D,A,C,!1,null,"20b22c9d",null),O=L.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:16}},[s("ListTable",{ref:"ListTable",attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}})],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("QuickActions",{attrs:{type:"primary",actions:t.quickActions}}),t._v(" "),s("RelationCard",t._b({ref:"systemUserRelation",staticStyle:{"margin-top":"15px"}},"RelationCard",t.systemUserRelationConfig,!1))],1)],1)],1)},U=[],P=s("579c"),R=s("e975"),G=s("e54e"),M={name:"SystemUserList",components:{QuickActions:u["a"],RelationCard:l["a"],ListTable:P["a"]},props:{object:{type:Object,default:function(){}}},data:function(){var t=this,e=this;return{tableConfig:{url:"/api/v1/assets/system-users-assets-relations/?asset=".concat(this.object.id),columns:["systemuser_display","connectivity","actions"],columnsMeta:{systemuser_display:{label:this.$t("assets.SystemUser"),showOverflowTooltip:!0,formatter:R["g"],formatterArgs:{getRoute:function(t){var e=t.row;return{name:"SystemUserDetail",params:{id:e.systemuser}}}}},connectivity:G["a"],actions:{formatterArgs:{hasUpdate:!1,hasDelete:!1,hasClone:!1,moreActionsTitle:this.$t("common.More"),extraActions:[{name:"Test",title:this.$t("common.Test"),type:"primary",callback:function(e){var s=e.row,a="/api/v1/assets/system-users/".concat(s.systemuser,"/tasks/"),i={action:"test",assets:[t.object.id]};t.$axios.post(a,i).then((function(t){Object(_["a"])(t["task"])}))}},{name:"Push",title:this.$t("common.Push"),type:"primary",callback:function(e){var s=e.row,a="/api/v1/assets/system-users/".concat(s.systemuser,"/tasks/"),i={action:"push",assets:[t.object.id]};t.$axios.post(a,i).then((function(t){Object(_["a"])(t["task"])}))}},{name:"Delete",title:this.$t("common.Delete"),type:"danger",can:!this.$store.getters.currentOrgIsRoot,callback:function(e){t.$axios.delete("/api/v1/assets/system-users-assets-relations/".concat(e.row.id,"/")).then((function(){t.$message.success(t.$t("common.deleteSuccessMsg")),t.$refs.ListTable.reloadTable()}))}}]}}}},headerActions:{hasBulkDelete:!1,hasImport:!1,hasCreate:!1,extraMoreActions:[{title:this.$t("common.TestSelectedSystemUsersConnective"),name:"TestSelected",can:function(t){var e=t.selectedRows;return e.length>0},callback:this.bulkTestCallback.bind(this)},{title:this.$t("common.PushSelectedSystemUsersToAsset"),name:"PushSelected",can:function(t){var e=t.selectedRows;return e.length>0},callback:this.bulkPushCallback.bind(this)}]},quickActions:[{title:this.$t("assets.TestAllSystemUsersConnective"),attrs:{type:"primary",label:this.$t("common.Test")},callbacks:{click:function(){var t="/api/v1/assets/assets/".concat(this.object.id,"/tasks/"),e={action:"test_system_user"};this.$axios.post(t,e).then((function(t){Object(_["a"])(t["task"])}))}.bind(this)}},{title:this.$t("assets.PushAllSystemUsersToAsset"),attrs:{type:"primary",label:this.$t("common.Push")},callbacks:{click:function(t){t.row;var e="/api/v1/assets/assets/".concat(this.object.id,"/tasks/"),s={action:"push_system_user"};this.$axios.post(e,s).then((function(t){Object(_["a"])(t["task"])}))}.bind(this)}}],systemUserRelationConfig:{icon:"fa-link",type:"info",title:this.$t("assets.AssociateSystemUsers"),objectsAjax:{url:"/api/v1/assets/system-users/"},performAdd:function(e,s){var a="/api/v1/assets/system-users-assets-relations/",i=e.map((function(e){return{asset:t.object.id,systemuser:e.value}}));return 0===i.length?t.$message.error(t.$tc("assets.UnselectedSystemUsers")):t.$axios.post(a,i)},onAddSuccess:function(s,a){e.$message.success(t.$t("common.updateSuccessMsg")),e.$refs.ListTable.reloadTable(),e.$refs.systemUserRelation.$refs.select2.clearSelected()}}}},methods:{bulkPushCallback:function(t){var e=t.selectedRows,s="/api/v1/assets/assets/".concat(this.object.id,"/tasks/"),a=e.map((function(t){return t.systemuser})),i={action:"push_system_user",system_users:a};this.$axios.post(s,i).then((function(t){Object(_["a"])(t["task"])}))},bulkTestCallback:function(t){var e=t.selectedRows,s="/api/v1/assets/assets/".concat(this.object.id,"/tasks/"),a=e.map((function(t){return t.systemuser})),i={action:"test_system_user",system_users:a};this.$axios.post(s,i).then((function(t){Object(_["a"])(t["task"])}))}}},I=M,q=Object(f["a"])(I,S,U,!1,null,"705ac6bf",null),E=q.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:16}},[s("ListTable",{ref:"ListTable",attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}})],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("PermUserGroupCard",t._b({},"PermUserGroupCard",t.UserGroupCardConfig,!1))],1)],1),t._v(" "),s("GenericListTableDialog",t._b({attrs:{visible:t.GenericListTableDialogConfig.visible},on:{"update:visible":function(e){return t.$set(t.GenericListTableDialogConfig,"visible",e)}}},"GenericListTableDialog",t.GenericListTableDialogConfig,!1))],1)},N=[],B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("IBox",t._b({attrs:{fa:t.icon,type:t.type,title:t.title}},"IBox",t.$attrs,!1),[s("table",{staticClass:"CardTable",staticStyle:{width:"100%","table-layout":"fixed"}},t._l(t.iObjects,(function(e){return s("tr",{key:e.value,staticClass:"item"},[s("td",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[s("el-tooltip",{staticStyle:{margin:"4px"},attrs:{effect:"dark",content:e.label,placement:"left"}},[s("el-link",{staticClass:"detail",on:{click:function(s){return t.goDetail(e)}}},[t._v(t._s(e.label))])],1)],1),t._v(" "),s("td",[s("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(s){return t.buttonClickCallback(e)}}},[t._v("\n          "+t._s(t.buttonTitle)+"\n        ")])],1)])})),0)])},F=[],H=(s("7f7f"),s("ac6a"),s("f3e2"),s("96cf"),s("3b8d")),J={name:"PermUserGroupCard",components:{IBox:h["a"]},props:{icon:{type:String,required:!0},title:{type:String,required:!0},type:{type:String,default:"primary"},url:{type:String,required:!0},detailRoute:{type:String,default:""},buttonTitle:{type:String,required:!0},buttonClickCallback:{type:Function,default:function(t){}}},data:function(){return{objects:[]}},computed:{iObjects:function(){return this.objects}},mounted:function(){this.loadObjects()},methods:{loadObjects:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get(this.url);case 2:e=t.sent,e.forEach((function(t){t["label"]=t["name"]})),this.objects=e;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goDetail:function(t){this.$router.push({name:this.detailRoute,params:{id:t.id}})}}},V=J,z=(s("7c54"),Object(f["a"])(V,B,F,!1,null,"08e93700",null)),K=z.exports,W={name:"PermUserList",components:{ListTable:P["a"],GenericListTableDialog:o["h"],PermUserGroupCard:K},props:{object:{type:Object,default:function(){}}},data:function(){var t=this;return{tableConfig:{url:"/api/v1/assets/assets/".concat(this.object.id,"/perm-users/"),columns:["name","username","email","phone","wechat","groups_display","total_role_display","source","is_valid","login_blocked","mfa_enabled","mfa_force_enabled","is_expired","last_login","date_joined","date_password_last_updated","comment","created_by","actions"],columnsShow:{min:["name","username","actions"],default:["name","username","source","is_valid","actions"]},columnsMeta:{name:{formatterArgs:{route:"UserDetail"},showOverflowTooltip:!0},username:{showOverflowTooltip:!0},email:{showOverflowTooltip:!0},source:{width:"120px"},total_role_display:{label:this.$t("users.Role"),showOverflowTooltip:!0},mfa_enabled:{label:"MFA",formatterArgs:{showFalse:!1}},mfa_force_enabled:{formatterArgs:{showFalse:!1}},is_expired:{formatterArgs:{showFalse:!1}},groups_display:{width:"200px",showOverflowTooltip:!0},actions:{formatterArgs:{hasUpdate:!1,hasDelete:!1,hasClone:!1,extraActions:[{title:t.$t("assets.ViewPerm"),name:"view",type:"primary",callback:function(e){t.GenericListTableDialogConfig.visible=!0,t.GenericListTableDialogConfig.tableConfig.url="/api/v1/assets/assets/".concat(t.object.id,"/perm-users/").concat(e.row.id,"/permissions/")}}]}}}},headerActions:{hasImport:!1,hasExport:!1,hasLeftActions:!1},UserGroupCardConfig:{icon:"fa-users",title:this.$t("perms.UserGroups"),url:"/api/v1/assets/assets/".concat(t.object.id,"/perm-user-groups/"),detailRoute:"UserGroupDetail",buttonTitle:this.$t("assets.ViewPerm"),buttonClickCallback:function(e){t.GenericListTableDialogConfig.visible=!0,t.GenericListTableDialogConfig.tableConfig.url="/api/v1/assets/assets/".concat(t.object.id,"/perm-user-groups/").concat(e.id,"/permissions/")}},GenericListTableDialogConfig:{title:this.$t("perms.Permissions"),visible:!1,width:"60%",tableConfig:{url:"",columns:["name","users_amount","user_groups_amount","assets_amount","nodes_amount","is_valid","is_active","date_expired","comment","org_name","created_by","date_created"],columnsShow:{min:["name"],default:["name","is_valid","created_by","date_created"]},columnsMeta:{name:{formatterArgs:{route:"AssetPermissionDetail"},showOverflowTooltip:!0},users_amount:{label:this.$t("perms.User"),width:"60px",formatter:R["g"],formatterArgs:{route:"AssetPermissionDetail",routeQuery:{activeTab:"AssetPermissionUser"}}},from_ticket:{width:100,formatter:R["d"],formatterArgs:{showFalse:!1}},created_by:{showOverflowTooltip:!0},user_groups_amount:{label:this.$t("perms.UserGroups"),width:"100px",formatter:R["g"],formatterArgs:{route:"AssetPermissionDetail",routeQuery:{activeTab:"AssetPermissionUser"}}},assets_amount:{label:this.$t("perms.Asset"),width:"60px",formatter:R["g"],formatterArgs:{route:"AssetPermissionDetail",routeQuery:{activeTab:"AssetPermissionAsset"}}},nodes_amount:{label:this.$t("perms.Node"),width:"60px",formatter:R["g"],formatterArgs:{route:"AssetPermissionDetail",routeQuery:{activeTab:"AssetPermissionAsset"}}}}},headerActions:{hasImport:!1,hasExport:!1,hasLeftActions:!1,hasColumnSetting:!1}}}}},X=W,Y=Object(f["a"])(X,Q,N,!1,null,"1c7b66dc",null),Z=Y.exports,tt={name:"AssetListDetail",components:{GenericDetailPage:o["e"],TabPage:o["m"],Detail:w,Account:O,SystemUserList:E,PermUserList:Z},data:function(){return{TaskDetail:{},config:{activeMenu:"Detail",submenu:[{title:this.$t("assets.AssetDetail"),name:"Detail"},{title:this.$t("assets.SystemUser"),name:"SystemUserList"},{title:this.$t("assets.AccountList"),name:"Account"},{title:this.$t("assets.PermUserList"),name:"PermUserList"}],hasRightSide:!0,getObjectName:function(t){return t.hostname+"("+t.ip+")"}}}}},et=tt,st=Object(f["a"])(et,a,i,!1,null,"085eae3b",null);e["default"]=st.exports},"3cc2":function(t,e,s){},"7c54":function(t,e,s){"use strict";var a=s("8439"),i=s.n(a);i.a},"82a0":function(t,e,s){"use strict";function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.open("/#/ops/celery/task/".concat(t,"/log/?type=").concat(e),"","width=900,height=600")}s.d(e,"a",(function(){return a}))},8439:function(t,e,s){},c0eb:function(t,e,s){"use strict";var a=s("1157"),i=s.n(a);window.$=i.a,window.jQuery=i.a,e["a"]=i.a}}]);