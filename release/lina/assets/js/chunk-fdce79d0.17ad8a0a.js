(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fdce79d0"],{"3cc2":function(e,t,s){},"66ce":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TreeTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions,"tree-setting":e.treeSetting}})},r=[],i=(s("57e7"),s("d92a"),s("a481"),s("e975")),n=s("8ad4"),o={name:"GrantedAssets",components:{TreeTable:n["a"]},props:{treeUrl:{type:String,required:!0},tableUrl:{type:String,required:!0},onSelected:{type:Function,default:function(e,t){t.tableConfig.initialUrl||(t.tableConfig.initialUrl=t.tableConfig.url);var s=t.tableConfig.initialUrl,a=e.meta.data.id,r=s.replace("/assets/","/nodes/".concat(a,"/assets/"));t.tableConfig.url=r}},getShowUrl:{type:Function,default:function(e){var t=e.row;e.col;return this.tableUrl.replace("/assets/","/assets/".concat(t.id,"/system-users/?cache_policy=1"))}}},data:function(){var e=this;return{treeSetting:{showMenu:!1,showRefresh:!0,showAssets:!1,url:this.tableUrl,treeUrl:this.treeUrl,callback:{onSelected:function(t,s){return e.onSelected(s,e)},refresh:e.refreshObjectAssetPermission}},tableConfig:{url:this.tableUrl,hasTree:!0,columns:[{prop:"hostname",label:this.$t("assets.Hostname"),formatter:i["g"],sortable:!0,formatterArgs:{route:"AssetDetail"},showOverflowTooltip:!0},{prop:"ip",label:this.$t("assets.IP"),width:"140px",sortable:"custom"},{prop:"systemUsers",label:this.$t("assets.SystemUsers"),align:"center",formatter:i["n"],formatterArgs:{getUrl:this.getShowUrl.bind(this)},showOverflowTooltip:!0}]},headerActions:{hasLeftActions:!1,hasExport:!1,hasImport:!1}}},methods:{refreshObjectAssetPermission:function(){var e=this.tableUrl.replace("/assets/","/asset-permissions/cache/");return!e.indexOf("user-groups")&&this.$axios.delete(e)}}},c=o,u=s("2877"),l=Object(u["a"])(c,a,r,!1,null,"47c190d1",null);t["a"]=l.exports},"859c":function(e,t,s){"use strict";var a=s("9019"),r=s.n(a);r.a},9019:function(e,t,s){},c0eb:function(e,t,s){"use strict";var a=s("1157"),r=s.n(a);window.$=r.a,window.jQuery=r.a,t["a"]=r.a},eea5:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GenericDetailPage",e._g(e._b({attrs:{object:e.user,"active-menu":e.config.activeMenu},on:{"update:object":function(t){e.user=t},"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)}}},"GenericDetailPage",e.config,!1),e.$listeners),[s("keep-alive",[s(e.config.activeMenu,{tag:"component",attrs:{object:e.user}})],1)],1)},r=[],i=s("cd4a"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},o=[],c=s("579c"),u=s("e975"),l={name:"UserAssetPermission",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){var e=this;return{tableConfig:{url:"/api/v1/perms/asset-permissions/?user_id=".concat(this.object.id),hasSelection:!1,hasTree:!0,columns:["name","users_amount","user_groups_amount","assets_amount","nodes_amount","system_users_amount","is_valid","actions"],columnsMeta:{name:{formatter:u["g"],formatterArgs:{route:"AssetPermissionDetail"}},users_amount:{label:this.$t("perms.User"),width:"110px",formatter:u["g"],formatterArgs:{route:"AssetPermissionDetail",routeQuery:{activeTab:"AssetPermissionUser"}}},user_groups_amount:{label:this.$t("perms.UserGroups"),width:"110px"},assets_amount:{label:this.$t("perms.Asset"),width:"110px",formatter:u["g"],formatterArgs:{route:"AssetPermissionDetail",routeQuery:{activeTab:"AssetPermissionAsset"}}},nodes_amount:{label:this.$t("perms.Node"),width:"110px"},system_users_amount:{label:this.$t("perms.SystemUser"),width:"110px"},actions:{formatterArgs:{updateRoute:"AssetPermissionUpdate",performDelete:function(t){var s=t.row,a=(t.col,s.id),r="/api/v1/perms/asset-permissions/".concat(a,"/?user_id=").concat(e.object.id,"&draw=1");return e.$axios.delete(r)}}}}},headerActions:{hasLeftActions:!1,hasExport:!1,hasImport:!1,searchConfig:{url:"",options:[{label:this.$t("common.Name"),value:"name"},{label:this.$t("perms.isValid"),value:"is_valid",children:[{value:"1",label:this.$t("common.Yes")},{value:"0",label:this.$t("common.No")}]},{label:this.$t("common.Username"),value:"username"},{label:this.$t("perms.UserGroups"),value:"user_group"},{label:this.$t("perms.IP"),value:"ip"},{label:this.$t("perms.hostName"),value:"hostname"},{label:this.$t("perms.Node"),value:"node"},{label:this.$t("perms.SystemUser"),value:"system_user"},{label:this.$t("perms.Inherit"),value:"all",children:[{value:"1",label:this.$t("perms.Include")},{value:"0",label:this.$t("perms.Exclude")}]}]}}}}},p=l,m=s("2877"),d=Object(m["a"])(p,n,o,!1,null,"357699c6",null),h=d.exports,b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GrantedAssets",{attrs:{"tree-url":e.treeUrl,"table-url":e.tableUrl}})},f=[],g=s("66ce"),v={name:"UserGrantedAssets",components:{GrantedAssets:g["a"]},props:{object:{type:Object,required:!0}},data:function(){return{treeUrl:"/api/v1/perms/users/".concat(this.object.id,"/nodes/children/tree/?cache_policy=1"),tableUrl:"/api/v1/perms/users/".concat(this.object.id,"/assets/?cache_policy=1&all=1")}}},_=v,$=Object(m["a"])(_,b,f,!1,null,"4d03675b",null),y=$.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},w=[],U={name:"UserGrantedApplications",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){return{tableConfig:{url:"/api/v1/perms/users/".concat(this.object.id,"/applications/"),columns:["name","category_display","type","asset","comment"],columnsMeta:{name:{formatterArgs:{route:"RemoteAppDetail"}},type:{displayKey:"type_display",width:"140px"},asset:{label:this.$t("assets.Asset"),formatter:function(e){return e.attrs.host||e.attrs.hostname}}}},headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1}}}},j=U,x=Object(m["a"])(j,A,w,!1,null,"751c21bc",null),k=x.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},L=[],O={name:"UserRemoteAppPermissionRules",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){var e=this;return{tableConfig:{url:"/api/v1/perms/application-permissions/?user_id=".concat(this.object.id,"&draw=1"),columns:["name","category_display","users_amount","user_groups_amount","applications_amount","system_users_amount","is_valid","actions"],columnsMeta:{name:{formatterArgs:{route:"ApplicationPermissionDetail"},showOverflowTooltip:!0},users_amount:{label:this.$t("users.Users"),width:"110px"},user_groups_amount:{label:this.$t("users.UserGroups"),width:"110px"},applications_amount:{label:this.$t("assets.Applications"),width:"110px"},system_users_amount:{label:this.$t("assets.SystemUsers"),width:"110px"},actions:{formatterArgs:{onUpdate:function(t){var s=t.row,a=(t.col,t.cellValue,{name:"ApplicationPermissionUpdate",params:{id:s.id},query:{type:s.type,category:s.category}});e.$router.push(a)},performDelete:function(t){var s=t.row,a=(t.col,s.id),r="/api/v1/perms/application-permissions/".concat(a,"/?user_id=").concat(e.object.id,"&draw=1");return e.$axios.delete(r)},onClone:function(t){var s=t.row,a={name:"ApplicationPermissionCreate",query:{type:s.type,category:s.category,clone_from:s.id}};e.$router.push(a)}}}}},headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1}}}},P=O,D=Object(m["a"])(P,C,L,!1,null,"1334bde4",null),q=D.exports,S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},R=[],T={name:"UserGrantedDatabases",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){return{tableConfig:{url:"/api/v1/perms/users/".concat(this.object.id,"/database-apps/?draw=1"),columns:["name","get_type_display","host","port","database","comment"],columnsMeta:{name:{formatterArgs:{route:"DatabaseAppDetail"}},get_type_display:{label:this.$t("applications.type"),width:"80px"},host:{width:"140px"},port:{width:"60px"},database:{showOverflowTooltip:!0}}},headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1}}}},M=T,E=Object(m["a"])(M,S,R,!1,null,"179cb276",null),G=E.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},B=[],K={name:"UserGrantedK8Ss",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){return{tableConfig:{url:"/api/v1/perms/users/".concat(this.object.id,"/k8s-apps/?draw=1"),columns:["name","type","cluster","comment"],columnsMeta:{name:{formatterArgs:{route:"KubernetesAppDetail"}},comment:{width:"340px"},type:{width:"140px"}}},headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1}}}},F=K,N=Object(m["a"])(F,I,B,!1,null,"04c9b1d6",null),Q=N.exports,H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},W=[],J={name:"UserDatabasePermissionRules",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){var e=this;return{tableConfig:{url:"/api/v1/perms/k8s-app-permissions/?user_id=".concat(this.object.id,"&draw=1"),columns:["name","users_amount","user_groups_amount","k8s_apps_amount","system_users_amount","is_valid","actions"],columnsMeta:{name:{formatterArgs:{route:"KubernetesAppPermissionDetail"}},users_amount:{label:this.$t("users.Users"),width:"110px"},user_groups_amount:{label:this.$t("users.UserGroups"),width:"110px"},k8s_apps_amount:{label:this.$t("perms.KubernetesApp"),width:"110px"},system_users_amount:{label:this.$t("assets.SystemUsers"),width:"110px"},actions:{formatterArgs:{updateRoute:"KubernetesAppPermissionUpdate",performDelete:function(t){var s=t.row,a=(t.col,s.id),r="/api/v1/perms/k8s-app-permissions/".concat(a,"/?user_id=").concat(e.object.id,"&draw=1");return e.$axios.delete(r)}}}}},headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1}}}},V=J,z=Object(m["a"])(V,H,W,!1,null,"4db14c16",null),Y=z.exports,X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GenericListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},Z=[],ee=s("3758"),te={components:{GenericListTable:ee["a"]},data:function(){var e=this;return{tableConfig:{url:"/api/v1/acls/login-acls/?user=".concat(this.$route.params.id),columns:["name","reviewers","priority","user_display","action","is_active","comment","actions"],columnsShow:{min:["name","actions"],default:["name","priority","is_active","user_display","action","comment","actions"]},columnsMeta:{name:{formatterArgs:{route:"UserLoginACLDetail",routeQuery:{user:this.$route.params.id}}},ip_group:{formatter:u["b"],showOverflowTooltip:!0},action:{prop:"action_display"},reviewers:{prop:"reviewers_amount"},actions:{formatterArgs:{hasClone:!1,updateRoute:{name:"UserLoginACLUpdate",query:{user:this.$route.params.id}},performDelete:function(t){var s=t.row,a=(t.col,s.id),r="/api/v1/acls/login-acls/".concat(a,"/?user=").concat(e.$route.params.id);return e.$axios.delete(r)}}}}},headerActions:{createRoute:{name:"UserLoginACLCreate",query:{user:this.$route.params.id}},hasRefresh:!0,hasExport:!1,hasImport:!1,hasMoreActions:!1}}}},se=te,ae=Object(m["a"])(se,X,Z,!1,null,null,null),re=ae.exports,ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},ne=[],oe={name:"UserDatabasePermissionRules",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){var e=this;return{tableConfig:{url:"/api/v1/perms/database-app-permissions/?user_id=".concat(this.object.id,"&draw=1"),columns:["name","users_amount","user_groups_amount","database_apps_amount","system_users_amount","is_valid","actions"],columnsMeta:{name:{formatterArgs:{route:"DatabaseAppPermissionDetail"}},users_amount:{label:this.$t("users.Users"),width:"110px"},user_groups_amount:{label:this.$t("users.UserGroups"),width:"110px"},database_apps_amount:{label:this.$t("assets.RemoteApps"),width:"110px"},system_users_amount:{label:this.$t("assets.SystemUsers"),width:"110px"},actions:{formatterArgs:{updateRoute:"DatabaseAppPermissionUpdate",performDelete:function(t){var s=t.row,a=(t.col,s.id),r="/api/v1/perms/database-app-permissions/".concat(a,"/?user_id=").concat(e.object.id,"&draw=1");return e.$axios.delete(r)}}}}},headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1}}}},ce=oe,ue=Object(m["a"])(ce,ie,ne,!1,null,"b8dca8de",null),le=ue.exports,pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{md:14,sm:24}},[s("DetailCard",{attrs:{items:e.detailItems}})],1),e._v(" "),s("el-col",{attrs:{md:10,sm:24}},[s("QuickActions",{attrs:{actions:e.quickActions,type:"primary"}}),e._v(" "),s("RelationCard",e._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",e.relationConfig,!1))],1)],1)},me=[],de=(s("7f7f"),s("6d67"),s("96cf"),s("3b8d")),he=s("b97b"),be=s("8c34"),fe=s("58fd"),ge=s("cf45"),ve={name:"UserInfo",components:{DetailCard:he["a"],RelationCard:fe["a"],QuickActions:be["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e=this,t=this;return{quickActions:[{title:this.$t("common.Activate"),type:"switcher",attrs:{model:this.object.is_active},callbacks:{change:function(e,s){var a="/api/v1/users/users/".concat(t.object.id,"/"),r={is_active:e};t.$axios.patch(a,r).catch((function(){s.attrs.model=!e})).then((function(e){t.$message.success(t.$t("common.updateSuccessMsg"))})).catch((function(e){t.$message.error(t.$t("common.updateErrorMsg "+e))}))}}},{title:this.$t("users.quickUpdate.resetMFA"),attrs:{type:"primary",label:this.$t("common.Reset")},callbacks:{click:function(){var e=t.$t("users.quickUpdate.resetMFAWarningMsg"),s=t.$t("common.Info"),a="/api/v1/users/users/".concat(t.object.id,"/mfa/reset/"),r=t.$t("users.quickUpdate.resetMFAdSuccessMsg");t.$confirm(e,s,{type:"warning",confirmButtonClass:"el-button--warning",showCancelButton:!0,beforeClose:function(){var e=Object(de["a"])(regeneratorRuntime.mark((function e(s,i,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"===s){e.next=2;break}return e.abrupt("return",n());case 2:return i.confirmButtonLoading=!0,e.prev=3,e.next=6,t.$axios.get(a);case 6:n(),t.$message.success(r);case 8:return e.prev=8,i.confirmButtonLoading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[3,,8,11]])})));function s(t,s,a){return e.apply(this,arguments)}return s}()})}}},{title:this.$t("users.quickUpdate.resetPassword"),attrs:{type:"primary",disabled:"local"!==this.object.source,label:this.$t("users.quickUpdate.send")},callbacks:{click:function(){var e=t.$t("users.quickUpdate.resetPasswordWarningMsg"),s=t.$t("common.Info"),a="/api/v1/users/users/".concat(t.object.id,"/password/reset/"),r=t.$t("users.quickUpdate.resetPasswordSuccessMsg");t.$confirm(e,s,{type:"warning",confirmButtonClass:"el-button--warning",showCancelButton:!0,beforeClose:function(){var e=Object(de["a"])(regeneratorRuntime.mark((function e(s,i,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"===s){e.next=2;break}return e.abrupt("return",n());case 2:return i.confirmButtonLoading=!0,e.prev=3,e.next=6,t.$axios.patch(a,{});case 6:n(),t.$message.success(r);case 8:return e.prev=8,i.confirmButtonLoading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[3,,8,11]])})));function s(t,s,a){return e.apply(this,arguments)}return s}()})}}},{title:this.$t("users.quickUpdate.resetSSHKey"),attrs:{type:"primary",disabled:!this.$store.state.users.profile.can_public_key_auth,label:this.$t("users.quickUpdate.send")},callbacks:{click:function(){var e=t.$t("users.quickUpdate.resetSSHKeyWarningMsg"),s=t.$t("common.Info"),a="/api/v1/users/users/".concat(t.object.id,"/pubkey/reset/"),r=t.$t("users.quickUpdate.resetSSHKeySuccessMsg");t.$confirm(e,s,{type:"warning",confirmButtonClass:"el-button--warning",showCancelButton:!0,beforeClose:function(){var e=Object(de["a"])(regeneratorRuntime.mark((function e(s,i,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"===s){e.next=2;break}return e.abrupt("return",n());case 2:return i.confirmButtonLoading=!0,e.prev=3,e.next=6,t.$axios.patch(a,{});case 6:n(),t.$message.success(r);case 8:return e.prev=8,i.confirmButtonLoading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[3,,8,11]])})));function s(t,s,a){return e.apply(this,arguments)}return s}()})}}},{title:this.$t("users.quickUpdate.unblockUser"),attrs:{type:"primary",label:this.$t("users.quickUpdate.unblock"),disabled:!this.object.login_blocked},callbacks:{click:function(e,s){var a="/api/v1/users/users/".concat(t.object.id,"/unblock/"),r=t.$t("users.quickUpdate.unblockSuccessMsg");t.$axios.patch(a).then((function(){s.attrs.disabled=!s.attrs.disabled,t.$message.success(r)}))}}}],relationConfig:{icon:"fa-user",title:this.$t("users.UserGroups"),objectsAjax:{url:"/api/v1/users/groups/?fields_size=mini&order=name"},hasObjectsId:this.object.groups,performDelete:function(t){var s=t.value,a=e.object.id,r="/api/v1/users/users-groups-relations/?user=".concat(a,"&usergroup=").concat(s);return e.$axios.delete(r)},performAdd:function(t){var s="/api/v1/users/users-groups-relations/",a=e.object.id,r=t.map((function(e){return{usergroup:e.value,user:a}}));return e.$axios.post(s,r)}}}},computed:{detailItems:function(){return[{key:this.$t("users.Name"),value:this.object.name},{key:this.$t("users.Username"),value:this.object.username},{key:this.$t("users.Email"),value:this.object.email},{key:this.$t("users.Phone"),value:this.object.phone},{key:this.$t("users.WeCom"),value:this.object.wecom_id},{key:this.$t("users.DingTalk"),value:this.object.dingtalk_id},{key:this.$t("users.FeiShu"),value:this.object.feishu_id},{key:this.$t("users.Role"),value:this.object.total_role_display},{key:this.$t("users.MFA"),value:this.object.mfa_level_display},{key:this.$t("users.Source"),value:this.object.source_display},{key:this.$t("common.CreatedBy"),value:this.object.created_by},{key:this.$t("users.DateJoined"),value:Object(ge["q"])(this.object.date_joined)},{key:this.$t("users.DateExpired"),value:Object(ge["q"])(this.object.date_expired)},{key:this.$t("users.DatePasswordUpdated"),value:Object(ge["q"])(this.object.date_password_last_updated)},{key:this.$t("users.DateLastLogin"),value:Object(ge["q"])(this.object.last_login)},{key:this.$t("common.Comment"),value:this.object.comment}]}},watch:{group:function(e,t){this.$log.debug("Group has changed"),this.relationConfig.hasObjectsId=e.users}},methods:{}},_e=ve,$e=(s("859c"),Object(m["a"])(_e,pe,me,!1,null,"674963bb",null)),ye=$e.exports,Ae={components:{GenericDetailPage:i["e"],UserInfo:ye,UserGrantedAssets:y,UserAssetPermissionRules:h,UserGrantedApplications:k,UserApplicationPermissionRules:q,UserGrantedDatabases:G,UserDatabasePermissionRules:le,UserK8SPermissionRules:Y,UserGrantedK8Ss:Q,UserLoginACLList:re},data:function(){var e=this;return{user:{name:"",username:"",email:"",comment:""},config:{activeMenu:"UserInfo",actions:{canUpdate:function(){return e.user.can_update},canDelete:function(){return e.user.can_delete}},submenu:[{title:this.$t("common.BasicInfo"),name:"UserInfo"},{title:this.$t("users.tabs.grantedAssets"),name:"UserGrantedAssets"},{title:this.$t("users.tabs.assetPermissionRules"),name:"UserAssetPermissionRules"},{title:this.$t("users.tabs.grantedApplications"),name:"UserGrantedApplications"},{title:this.$t("users.tabs.ApplicationPermissionRules"),name:"UserApplicationPermissionRules"},{title:this.$t("route.UserAclLists"),name:"UserLoginACLList"}]}}},methods:{handleTabClick:function(e){this.$log.debug("Current nav is: ",this.config.activeMenu)}}},we=Ae,Ue=Object(m["a"])(we,a,r,!1,null,"2cfe1080",null);t["default"]=Ue.exports}}]);