(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-096fe3eb"],{"1df3":function(t,e,n){"use strict";var o=n("8383"),r=n.n(o);r.a},8383:function(t,e,n){},c205:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"terminal",staticClass:"xterm",attrs:{id:"terminal"}})},r=[],s=(n("abb2"),n("fcf3")),i=n("47d0"),a={name:"CeleryTaskLog",props:{},data:function(){return{xterm:null,ws:null,taskId:this.$route.params.id,type:this.$route.params.type||this.$route.query.type||"celery",url:"/ws/ops/tasks/log/",failOverPort:Object({VUE_APP_BASE_API:"",VUE_APP_PUBLIC_PATH:"/ui",VUE_APP_LOGIN_PATH:"/core/auth/login/",VUE_APP_LOGOUT_PATH:"/core/auth/logout/",VUE_APP_ENV:"production",NODE_ENV:"production",BASE_URL:"/ui/"}).VUE_APP_WS_PORT}},computed:{},mounted:function(){this.initTermAndWs()},beforeDestroy:function(){this.xterm.dispose()},methods:{reset:function(){this.xterm.reset()},write:function(t){this.xterm.write(t)},initTermAndWs:function(){var t=this.$refs.terminal;this.xterm=new s["Terminal"]({fontFamily:'monaco, Consolas, "Lucida Console", monospace',lineHeight:1.2,fontSize:13,rightClickSelectsWord:!0,theme:{background:"#1f1b1b"}});var e=new i["FitAddon"];this.xterm.loadAddon(e),this.xterm.open(t),e.fit(),window.onresize=function(){e.fit()},this.xterm.scrollToBottom(),this.enableWS()},enableWS:function(){var t=this,e="https:"===document.location.protocol?"wss":"ws",n=document.location.port?":"+document.location.port:"",o="/ws/ops/tasks/log/",r=e+"://"+document.location.hostname+n+o;this.ws=new WebSocket(r),this.ws.onerror=function(e){t.xterm.write(t.wrapperError("Connect websocket server error"))},this.setWsCallback()},setWsCallback:function(){var t=this;this.ws.onmessage=function(e){var n=JSON.parse(e.data);t.xterm.write(n.message)},this.ws.onopen=function(e){var n={task:t.taskId,type:t.type};t.ws.send(JSON.stringify(n))}},wrapperError:function(t){return"\r\n".concat(t,"\r\n")}}},c=a,u=(n("1df3"),n("2877")),l=Object(u["a"])(c,o,r,!1,null,"09236ef4",null);e["default"]=l.exports}}]);