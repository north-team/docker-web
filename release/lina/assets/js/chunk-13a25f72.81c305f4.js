(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13a25f72","chunk-096fe3eb"],{"1df3":function(t,e,n){"use strict";var a=n("8383"),s=n.n(a);s.a},"4b33":function(t,e,n){},"4e82":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("IBox",t._b({attrs:{fa:t.icon,type:t.type,title:t.title}},"IBox",t.$attrs,!1),[n("table",{staticClass:"run-info"},[0===t.contents.length?n("p",[t._v(t._s(t.$t("common.Nothing")))]):t._e(),t._v(" "),t._l(t.contents,(function(e){return n("tr",{key:e.hostname},[n("td",[t._v(t._s(e.hostname))]),t._v(" "),n("td",[t._v(t._s(e.result))])])}))],2)])},s=[],i=n("e67a"),o={name:"RunInfoCard",components:{IBox:i["a"]},props:{title:{type:String,default:""},icon:{type:String,default:""},contents:{type:Array,default:function(){return[]}},url:{type:String,default:""},type:{type:String,default:"primary"}}},r=o,c=(n("e64f"),n("2877")),u=Object(c["a"])(r,a,s,!1,null,"c3747890",null);e["a"]=u.exports},"82a0":function(t,e,n){"use strict";function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.open("/#/ops/celery/task/".concat(t,"/log/?type=").concat(e),"","width=900,height=600")}n.d(e,"a",(function(){return a}))},8383:function(t,e,n){},bbcf:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GenericDetailPage",t._g(t._b({attrs:{object:t.TaskDetail,"active-menu":t.config.activeMenu},on:{"update:object":function(e){t.TaskDetail=e},"update:activeMenu":function(e){return t.$set(t.config,"activeMenu",e)},"update:active-menu":function(e){return t.$set(t.config,"activeMenu",e)}}},"GenericDetailPage",t.config,!1),t.$listeners),[n("keep-alive",[n(t.config.activeMenu,{tag:"component",attrs:{object:t.TaskDetail}})],1)],1)},s=[],i=n("cd4a"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:14}},[n("DetailCard",{attrs:{title:t.cardTitle,items:t.detailCardItems}})],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("RunInfoCard",t._b({staticStyle:{"margin-top":"15px"},attrs:{type:"danger"}},"RunInfoCard",t.RunFailedConfig,!1)),t._v(" "),n("RunInfoCard",t._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RunInfoCard",t.RunSuccessConfig,!1))],1)],1)},r=[],c=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("6d67"),n("bd86")),u=(n("7f7f"),n("b97b")),l=n("4e82"),f=n("ebab"),d=n("cf45"),p=n("82a0");function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b={name:"TaskDetail",components:{DetailCard:u["a"],RunInfoCard:l["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){return{RunSuccessConfig:{icon:"fa-info",title:this.$t("ops.lastRunSuccessHosts"),contents:Object(f["b"])(this.object.latest_execution)},RunFailedConfig:{icon:"fa-info",title:this.$t("ops.lastRunFailedHosts"),contents:Object(f["a"])(this.object.latest_execution)},taskData:{}}},computed:{cardTitle:function(){return this.object.name},detailCardItems:function(){var t=this.$createElement;return[{key:this.$t("common.Name"),value:this.object.name},{key:this.$t("common.dateCreated"),value:Object(d["q"])(this.object.date_created)},{key:this.$t("ops.totalVersions"),value:JSON.stringify(this.object.summary.total)},{key:this.$t("ops.latestVersion"),value:this.object.latest_execution,formatter:function(e,n){var a={to:{name:"AdhocDetail",params:{id:n.adhoc}}};return t("router-link",{attrs:m({},a)},[n.adhoc_short_id])}},{key:this.$t("ops.lastRun"),value:Object(d["q"])(this.object.latest_execution.date_finished)},{key:this.$t("ops.timeDelta"),value:this.object.latest_execution.timedelta.toFixed(2)+"s"},{key:this.$t("ops.isFinished"),value:this.object.latest_execution.is_finished},{key:this.$t("ops.isSuccess"),value:this.object.latest_execution.is_success},{key:this.$t("ops.contents"),value:this.toContentsDisplay(this.object.contents),formatter:function(t,e){var n=this.$createElement;return n("div",[e.map((function(t){return n("div",[t])}))])}},{key:this.$t("ops.lastExecutionOutput"),value:this.object.latest_execution.id,formatter:function(e,n){var a=function(){Object(p["a"])(n,"ansible")},s=this.$t("common.View");return t("a",{on:{click:a}},[s])}}]}},methods:{toContentsDisplay:function(t){for(var e=[],n=0;n<t.length;n++){var a=t[n];e.push("".concat(n,". ").concat(a.name," ::: ").concat(a.action.module))}return e}}},_=b,v=n("2877"),g=Object(v["a"])(_,o,r,!1,null,"83c0da46",null),y=g.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ListTable",{attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}})},j=[],w=n("579c"),x=n("e975"),$={name:"TaskHistory",components:{ListTable:w["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var t=this.$createElement;return{tableConfig:{url:"/api/v1/ops/adhoc-executions/?task=".concat(this.object.id),columns:["date_start","stat","ratio","is_finished","is_success","timedelta","adhoc_short_id","actions"],columnsMeta:{date_start:{formatter:function(t){return Object(d["q"])(t.date_start)},width:"160px"},stat:{label:this.$t("ops.stat"),align:"center",width:"100px",formatter:function(e){return t("div",[t("span",{class:"text-primary"},[e.stat.success]),"/",t("span",{class:"text-danger"},[e.stat.failed]),"/",t("span",[e.stat.total])])}},ratio:{label:this.$t("ops.ratio"),align:"center",width:"80px",formatter:function(e){var n=e.stat.success/e.stat.total*100;return t("span",100===n?{class:"text-navy"}:{class:"text-danger"},[n+"%"])}},is_finished:{align:"center",width:"100px",label:this.$t("ops.isFinished")},is_success:{align:"center",width:"100px",label:this.$t("ops.isSuccess")},timedelta:{label:this.$t("ops.time"),width:"100px",formatter:function(t){return t.timedelta.toFixed(2)+"s"}},adhoc_short_id:{label:this.$t("ops.version"),formatter:x["g"],formatterArgs:{route:"HistoryExecutionDetail"}},actions:{prop:"id",formatterArgs:{hasEdit:!1,hasDelete:!1,hasUpdate:!1,hasClone:!1,extraActions:[{name:"detail",title:this.$t("ops.detail"),type:"primary",callback:function(t){var e=t.row;t.tableData;return this.$router.push({name:"HistoryExecutionDetail",params:{id:e.id}})}}]}}}},headerActions:{hasLeftActions:!1,hasRightActions:!1}}}},O=$,A=Object(v["a"])(O,k,j,!1,null,"32756129",null),C=A.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ListTable",{attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}})},T=[],P={name:"TaskAdhoc",components:{ListTable:w["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){return{tableConfig:{url:"/api/v1/ops/adhoc/?task=".concat(this.object.id),columns:["short_id","hosts","pattern","run_as","become_display","date_created","actions"],columnsMeta:{short_id:{label:this.$t("ops.version"),formatter:x["g"],formatterArgs:{route:"AdhocDetail"}},hosts:{label:this.$t("ops.hosts"),width:"80px",formatter:function(t,e,n){return n instanceof Array?n.length:n},showOverflowTooltip:!0},pattern:{label:this.$t("ops.pattern"),width:"80px"},run_as:{label:this.$t("ops.runAs"),formatter:function(t){return t.run_as_admin?"Admin":t.run_as?t.run_as:void 0}},become_display:{label:this.$t("ops.become")},date_created:{label:this.$t("ops.datetime"),formatter:function(t){return Object(d["q"])(t.date_created)}},actions:{prop:"id",width:"80px",formatterArgs:{hasEdit:!1,hasDelete:!1,hasUpdate:!1,hasClone:!1,extraActions:[{name:"detail",title:this.$t("ops.detail"),type:"primary",callback:function(t){var e=t.row;t.tableData;return this.$router.push({name:"AdhocDetail",params:{id:e.id}})}}]}}}},headerActions:{hasLeftActions:!1,hasRightActions:!1}}}},E=P,S=Object(v["a"])(E,D,T,!1,null,"5acd4e02",null),R=S.exports,I=n("c205"),L={components:{GenericDetailPage:i["e"],CeleryTaskLog:I["default"],TaskHistory:C,TaskDetail:y,TaskAdhoc:R,TabPage:i["m"]},data:function(){return{TaskDetail:{},config:{activeMenu:"TaskDetail",submenu:[{title:this.$t("ops.taskDetail"),name:"TaskDetail"},{title:this.$t("ops.taskVersions"),name:"TaskAdhoc"},{title:this.$t("ops.execution"),name:"TaskHistory"}],hasRightSide:!1}}}},V=L,H=Object(v["a"])(V,a,s,!1,null,"7d0f45ae",null);e["default"]=H.exports},c205:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"terminal",staticClass:"xterm",attrs:{id:"terminal"}})},s=[],i=(n("abb2"),n("fcf3")),o=n("47d0"),r={name:"CeleryTaskLog",props:{},data:function(){return{xterm:null,ws:null,taskId:this.$route.params.id,type:this.$route.params.type||this.$route.query.type||"celery",url:"/ws/ops/tasks/log/",failOverPort:Object({VUE_APP_BASE_API:"",VUE_APP_PUBLIC_PATH:"/ui",VUE_APP_LOGIN_PATH:"/core/auth/login/",VUE_APP_LOGOUT_PATH:"/core/auth/logout/",VUE_APP_ENV:"production",NODE_ENV:"production",BASE_URL:"/ui/"}).VUE_APP_WS_PORT}},computed:{},mounted:function(){this.initTermAndWs()},beforeDestroy:function(){this.xterm.dispose()},methods:{reset:function(){this.xterm.reset()},write:function(t){this.xterm.write(t)},initTermAndWs:function(){var t=this.$refs.terminal;this.xterm=new i["Terminal"]({fontFamily:'monaco, Consolas, "Lucida Console", monospace',lineHeight:1.2,fontSize:13,rightClickSelectsWord:!0,theme:{background:"#1f1b1b"}});var e=new o["FitAddon"];this.xterm.loadAddon(e),this.xterm.open(t),e.fit(),window.onresize=function(){e.fit()},this.xterm.scrollToBottom(),this.enableWS()},enableWS:function(){var t=this,e="https:"===document.location.protocol?"wss":"ws",n=document.location.port?":"+document.location.port:"",a="/ws/ops/tasks/log/",s=e+"://"+document.location.hostname+n+a;this.ws=new WebSocket(s),this.ws.onerror=function(e){t.xterm.write(t.wrapperError("Connect websocket server error"))},this.setWsCallback()},setWsCallback:function(){var t=this;this.ws.onmessage=function(e){var n=JSON.parse(e.data);t.xterm.write(n.message)},this.ws.onopen=function(e){var n={task:t.taskId,type:t.type};t.ws.send(JSON.stringify(n))}},wrapperError:function(t){return"\r\n".concat(t,"\r\n")}}},c=r,u=(n("1df3"),n("2877")),l=Object(u["a"])(c,a,s,!1,null,"09236ef4",null);e["default"]=l.exports},e64f:function(t,e,n){"use strict";var a=n("4b33"),s=n.n(a);s.a},ebab:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return s}));n("7f7f"),n("6d67");var a=function(t){var e=t&&t.last_success;return e instanceof Array?e.map((function(t){return{hostname:t,result:""}})):[]},s=function(t){var e=t&&t.last_failure;if(!(e instanceof Object))return[];var n=[];for(var a in e){var s=e[a],i=[];for(var o in s)i.push("".concat(o," => ").concat(s[o].msg));n.push({hostname:a,result:i.join("\n")})}return n}}}]);