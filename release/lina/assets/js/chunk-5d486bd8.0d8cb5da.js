(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d486bd8"],{1:function(e,t){},"3cc2":function(e,t,a){},5779:function(e,t,a){},"82a0":function(e,t,a){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.open("/#/ops/celery/task/".concat(e,"/log/?type=").concat(t),"","width=900,height=600")}a.d(t,"a",(function(){return i}))},"938a":function(e,t,a){"use strict";var i=a("5779"),n=a.n(i);n.a},b891:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GenericDetailPage",e._g(e._b({attrs:{object:e.Organization,"active-menu":e.config.activeMenu},on:{"update:object":function(t){e.Organization=t},"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)}}},"GenericDetailPage",e.config,!1),e.$listeners),[a("keep-alive",[a(e.config.activeMenu,{tag:"component",attrs:{object:e.Organization}})],1)],1)},n=[],s=(a("d92a"),a("96cf"),a("3b8d")),r=a("cd4a"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:14,sm:24}},[a("DetailCard",{attrs:{title:e.cardTitle,items:e.detailCardItems}})],1),e._v(" "),a("el-col",{attrs:{md:10,sm:24}})],1)},c=[],u=(a("7f7f"),a("2af9")),l=a("cf45"),m={name:"OrganizationDetail",components:{DetailCard:u["f"]},props:{object:{type:Object,default:function(){return{}}}},computed:{cardTitle:function(){return this.object.name},detailCardItems:function(){return[{key:this.$t("common.Name"),value:this.object.name},{key:this.$t("common.createBy"),value:this.object.created_by},{key:this.$t("xpack.Organization.users_amount"),value:this.object.resource_statistics.users_amount},{key:this.$t("xpack.Organization.groups_amount"),value:this.object.resource_statistics.groups_amount},{key:this.$t("xpack.Organization.assets_amount"),value:this.object.resource_statistics.assets_amount},{key:this.$t("xpack.Organization.admin_users_amount"),value:this.object.resource_statistics.admin_users_amount},{key:this.$t("xpack.Organization.system_users_amount"),value:this.object.resource_statistics.system_users_amount},{key:this.$t("xpack.Organization.applications_amount"),value:this.object.resource_statistics.applications_amount},{key:this.$t("xpack.Organization.asset_perms_amount"),value:this.object.resource_statistics.asset_perms_amount},{key:this.$t("xpack.Organization.app_perms_amount"),value:this.object.resource_statistics.app_perms_amount},{key:this.$t("common.dateCreated"),value:Object(l["q"])(this.object.date_created)},{key:this.$t("common.Comment"),value:this.object.comment}]}}},d=m,b=a("2877"),g=Object(b["a"])(d,o,c,!1,null,"96b5c53e",null),h=g.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:14,sm:24}},[a("GenericListTable",{ref:"GenericListTable",attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})],1),e._v(" "),a("el-col",{attrs:{md:10,sm:24}},[a("RelationCard",e._b({staticClass:"RelationCard",attrs:{type:"primary"}},"RelationCard",e.memberRelationConfig,!1),[a("el-radio-group",{staticStyle:{padding:"8px"},model:{value:e.defaultOrgRole,callback:function(t){e.defaultOrgRole=t},expression:"defaultOrgRole"}},e._l(e.group,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)],1)},f=[],v=a("75fc"),O=(a("ac4d"),a("8a81"),a("ac6a"),a("3758")),_=a("58fd"),j=a("e975"),$={name:"OrganizationMembershipList",components:{GenericListTable:O["a"],RelationCard:_["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{defaultOrgRole:"User",group:[{label:this.$t("users.OrgAdmin"),value:"Admin"},{label:this.$t("users.OrgAuditor"),value:"Auditor"},{label:this.$t("users.OrgUser"),value:"User"}],tableConfig:{url:"/api/v1/orgs/org-member-relation/?org_id=".concat(this.object.id),columns:["user_display","role_display","delete_action"],columnsMeta:{user_display:{label:this.$t("common.Name")},role_display:{label:this.$t("xpack.Organization.OrgRole"),width:150},delete_action:{prop:"id",label:this.$t("common.Actions"),align:"center",width:80,objects:"all",formatter:j["f"],hasBackSlash:!0,deleteUrl:"/api/v1/orgs/org-member-relation/?id="}},tableAttrs:{border:!1}},headerActions:{hasLeftActions:!1,hasExport:!1,hasImport:!1},memberRelationConfig:{icon:"fa-user",title:this.$t("xpack.Organization.AddOrgMembers"),showHasMore:!1,objectsAjax:{url:"/api/v1/users/users/?fields_size=mini&order=name&all=1",transformOption:function(e){return{label:e.name+"("+e.username+")",value:e.id}}},hasObjectsId:this.object.users,showHasObjects:!1,performAdd:function(t){var a="/api/v1/orgs/org-member-relation/",i=[],n=!0,s=!1,r=void 0;try{for(var o,c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var u=o.value;i.push({org:e.object.id,user:u.value,role:e.defaultOrgRole})}}catch(l){s=!0,r=l}finally{try{n||null==c.return||c.return()}finally{if(s)throw r}}return e.$axios.post(a,i)},onAddSuccess:function(t,a){e.$log.debug("Select value",a.select2.value),a.iHasObjects=[].concat(Object(v["a"])(a.iHasObjects),Object(v["a"])(t)),a.$refs.select2.clearSelected(),e.$message.success(e.$t("common.updateSuccessMsg")),e.$refs.GenericListTable.$refs.ListTable.reloadTable(),window.location.reload()}}}},watch:{defaultOrgRole:function(e){"Admin"===e&&this.$set(this.memberRelationConfig,"hasObjectsId",this.object.admins),"Auditor"===e&&this.$set(this.memberRelationConfig,"hasObjectsId",this.object.auditors),"User"===e&&this.$set(this.memberRelationConfig,"hasObjectsId",this.object.users),"Assignee"===e&&this.$set(this.memberRelationConfig,"hasObjectsId",this.object.assignees)}}},k=$,y=(a("938a"),Object(b["a"])(k,p,f,!1,null,"7d38a446",null)),w=y.exports,x=function(){var e=Object(l["e"])(this);return this.$axios.delete(e)},z={components:{GenericDetailPage:r["e"],OrganizationDetail:h,OrganizationMembershipList:w,TabPage:r["m"]},data:function(){return{Organization:{},config:{activeMenu:"OrganizationDetail",submenu:[{title:this.$t("xpack.Organization.OrganizationDetail"),name:"OrganizationDetail"},{title:this.$t("xpack.Organization.OrganizationMembership"),name:"OrganizationMembershipList"}],actions:{deleteCallback:function(){var e=this,t=this.$t("xpack.Organization.DeleteOrgMsg"),a=this.$t("xpack.Organization.DeleteOrgTitle");this.$alert(t,a,{type:"warning",confirmButtonClass:"el-button--danger",showCancelButton:!0,beforeClose:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a,i,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("confirm"===a){t.next=2;break}return t.abrupt("return",n());case 2:return i.confirmButtonLoading=!0,t.prev=3,t.next=6,x.bind(e)();case 6:return e.$message.success(e.$t("common.deleteSuccessMsg")),e.$router.push("/xpack/orgs/"),t.abrupt("return",n());case 11:t.prev=11,t.t0=t["catch"](3),e.$log.error(t.t0);case 14:return t.prev=14,i.confirmButtonLoading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[3,11,14,17]])})));function a(e,a,i){return t.apply(this,arguments)}return a}()}).catch((function(){}))}}}}}},C=z,R=Object(b["a"])(C,i,n,!1,null,"24b888c4",null);t["default"]=R.exports},c0eb:function(e,t,a){"use strict";var i=a("1157"),n=a.n(i);window.$=n.a,window.jQuery=n.a,t["a"]=n.a}}]);