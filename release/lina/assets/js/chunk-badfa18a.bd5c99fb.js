(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-badfa18a"],{"1b87":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("GenericDetailPage",t._g(t._b({attrs:{object:t.AdhocDetail,"active-menu":t.config.activeMenu},on:{"update:object":function(e){t.AdhocDetail=e},"update:activeMenu":function(e){return t.$set(t.config,"activeMenu",e)},"update:active-menu":function(e){return t.$set(t.config,"activeMenu",e)}}},"GenericDetailPage",t.config,!1),t.$listeners),[a("keep-alive",[a(t.config.activeMenu,{tag:"component",attrs:{object:t.AdhocDetail}})],1)],1)},s=[],i=a("cd4a"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ListTable",{attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}})},c=[],r=a("579c"),u=a("e975"),l=a("cf45"),d={name:"AdhocExecutionHistory",components:{ListTable:r["a"]},data:function(){var t=this.$createElement;return{tableConfig:{url:"/api/v1/ops/adhoc-executions/?adhoc=".concat(this.$route.params.id),columns:["date_start","stat","ratio","is_finished","is_success","timedelta","adhoc_short_id","actions"],columnsMeta:{date_start:{formatter:function(t){return Object(l["q"])(t.date_start)}},stat:{label:this.$t("ops.stat"),align:"center",width:"100px",formatter:function(e){var a=t("div",[t("span",{class:"text-primary"},[e.stat.success]),"/",t("span",{class:"text-danger"},[e.stat.failed]),"/",t("span",[e.stat.total])]);return a}},ratio:{label:this.$t("ops.ratio"),align:"center",width:"80px",formatter:function(e){var a=e.stat.success/e.stat.total*100;return t("span",100===a?{class:"text-navy"}:{class:"text-danger"},[a+"%"])}},is_finished:{align:"center",width:"100px",label:this.$t("ops.isFinished")},is_success:{align:"center",width:"100px",label:this.$t("ops.isSuccess")},timedelta:{label:this.$t("ops.time"),width:"100px",formatter:function(t){return t.timedelta.toFixed(2)+"s"}},adhoc_short_id:{label:this.$t("ops.version")},actions:{prop:"id",formatter:u["a"],formatterArgs:{hasEdit:!1,hasDelete:!1,hasUpdate:!1,extraActions:[{name:"detail",title:this.$t("ops.detail"),type:"primary",callback:function(t){var e=t.row;t.tableData;return this.$router.push({name:"HistoryExecutionDetail",params:{id:e.id}})}}]}}}},headerActions:{hasLeftActions:!1,hasRightActions:!1}}}},h=d,p=a("2877"),f=Object(p["a"])(h,o,c,!1,null,"441bfbc4",null),b=f.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:14}},[a("DetailCard",{attrs:{title:t.cardTitle,items:t.detailCardItems}})],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("RunInfoCard",t._b({staticStyle:{"margin-top":"15px"},attrs:{type:"danger"}},"RunInfoCard",t.RunFailedConfig,!1)),t._v(" "),a("RunInfoCard",t._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RunInfoCard",t.RunSuccessConfig,!1))],1)],1)},v=[],_=(a("7f7f"),a("a481"),a("6d67"),a("b97b")),y=a("4e82"),g=a("ebab"),$={name:"AdhocDetail",components:{DetailCard:_["a"],RunInfoCard:y["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){return{RunSuccessConfig:{icon:"fa-info",title:this.$t("ops.lastRunSuccessHosts"),contents:Object(g["b"])(this.object.latest_execution)},RunFailedConfig:{icon:"fa-info",title:this.$t("ops.lastRunFailedHosts"),contents:Object(g["a"])(this.object.latest_execution)}}},computed:{cardTitle:function(){return"".concat(this.object.task_name,": ").concat(this.object.short_id)},detailCardItems:function(){this.$createElement;return[{key:this.$t("ops.hosts"),value:JSON.stringify(this.object.hosts.length)},{key:this.$t("ops.pattern"),value:this.object.pattern},{key:this.$t("ops.options"),value:this.disPlayOptions(this.object.options)},{key:this.$t("ops.runAs"),value:this.disPlayRunAs(this.object.run_as_admin,this.object.run_as)},{key:this.$t("ops.become"),value:this.object.become_display},{key:this.$t("common.createBy"),value:this.object.created_by},{key:this.$t("common.dateCreated"),value:Object(l["q"])(this.object.date_created)},{key:this.$t("ops.runTimes"),value:this.object.run_times},{key:this.$t("ops.lastRun"),value:this.object.latest_execution.last_run},{key:this.$t("ops.timeDelta"),value:this.object.latest_execution.timedelta},{key:this.$t("ops.isFinished"),value:this.object.latest_execution.is_finished},{key:this.$t("ops.isSuccess"),value:this.object.latest_execution.is_success},{key:this.$t("ops.tasks"),value:this.toContentsDisplay(this.object.tasks),formatter:function(t,e){var a=this.$createElement;return a("div",[e.map((function(t){return a("div",[t])}))])}}]}},methods:{disPlayRunAs:function(t,e){return t?"Admin":e},disPlayOptions:function(t){return t.replace(/:/g,"=").replace(/'/g,"").replace("{","").replace("}","")},toContentsDisplay:function(t){for(var e=[],a=0;a<t.length;a++){var n=t[a];e.push("".concat(a,". ").concat(n.name," ::: ").concat(n.action.module))}return e}}},j=$,x=Object(p["a"])(j,m,v,!1,null,"0cb4b99c",null),k=x.exports,A={components:{GenericDetailPage:i["e"],AdhocExecutionHistory:b,AdhocDetail:k,TabPage:i["m"]},data:function(){return{AdhocDetail:{},config:{activeMenu:"AdhocDetail",title:this.$t("ops.taskDetail"),submenu:[{title:this.$t("ops.versionDetail"),name:"AdhocDetail"},{title:this.$t("ops.versionRunExecution"),name:"AdhocExecutionHistory"}],hasRightSide:!1}}}},D=A,C=Object(p["a"])(D,n,s,!1,null,"9328de3a",null);e["default"]=C.exports},"4b33":function(t,e,a){},"4e82":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("IBox",t._b({attrs:{fa:t.icon,type:t.type,title:t.title}},"IBox",t.$attrs,!1),[a("table",{staticClass:"run-info"},[0===t.contents.length?a("p",[t._v(t._s(t.$t("common.Nothing")))]):t._e(),t._v(" "),t._l(t.contents,(function(e){return a("tr",{key:e.hostname},[a("td",[t._v(t._s(e.hostname))]),t._v(" "),a("td",[t._v(t._s(e.result))])])}))],2)])},s=[],i=a("e67a"),o={name:"RunInfoCard",components:{IBox:i["a"]},props:{title:{type:String,default:""},icon:{type:String,default:""},contents:{type:Array,default:function(){return[]}},url:{type:String,default:""},type:{type:String,default:"primary"}}},c=o,r=(a("e64f"),a("2877")),u=Object(r["a"])(c,n,s,!1,null,"c3747890",null);e["a"]=u.exports},e64f:function(t,e,a){"use strict";var n=a("4b33"),s=a.n(n);s.a},ebab:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s}));a("7f7f"),a("6d67");var n=function(t){var e=t&&t.last_success;return e instanceof Array?e.map((function(t){return{hostname:t,result:""}})):[]},s=function(t){var e=t&&t.last_failure;if(!(e instanceof Object))return[];var a=[];for(var n in e){var s=e[n],i=[];for(var o in s)i.push("".concat(o," => ").concat(s[o].msg));a.push({hostname:n,result:i.join("\n")})}return a}}}]);