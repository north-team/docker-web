(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-539d7cd7"],{"4e46":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GenericCreateUpdatePage",e._b({attrs:{initial:e.initial}},"GenericCreateUpdatePage",e.$data,!1))},n=[],i=a("cd4a"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.approveData,(function(t,s){return a("div",{key:s,staticStyle:{"margin-bottom":"10px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(s+1+" "+e.vm.$t("tickets.LevelApproval")))])]),e._v(" "),a("el-radio-group",{on:{change:function(t){return e.onChange()}},model:{value:t.strategy,callback:function(a){e.$set(t,"strategy",a)},expression:"item.strategy"}},[a("el-radio",{attrs:{label:"super_admin"}},[e._v(e._s(e.vm.$t("tickets.SuperAdmin")))]),e._v(" "),a("el-radio",{attrs:{label:"org_admin"}},[e._v(e._s(e.vm.$t("tickets.OrgAdmin")))]),e._v(" "),a("el-radio",{attrs:{label:"super_org_admin"}},[e._v(e._s(e.vm.$t("tickets.SuperOrgAdmin")))]),e._v(" "),a("el-radio",{attrs:{label:"custom_user"}},[e._v(e._s(e.vm.$t("tickets.CustomUser")))])],1),e._v(" "),a("br"),e._v(" "),a("Select2",e._b({directives:[{name:"show",rawName:"v-show",value:"custom_user"===t.strategy,expression:"item.strategy === 'custom_user'"}],on:{change:function(t){return e.onChange()}},model:{value:t.assignees,callback:function(a){e.$set(t,"assignees",a)},expression:"item.assignees"}},"Select2",e.select2Option,!1))],1)],1)})),0)},l=[],o=(a("55dd"),a("ac6a"),a("f3e2"),a("c5f6"),a("56f5")),u={components:{Select2:o["a"]},props:{value:{type:[String,Array],default:function(){return[]}},level:{type:Number,default:1}},data:function(){return{vm:this,defaultRule:[{strategy:"super_admin",assignees_read_only:[]}],select2Option:{url:"/api/v1/users/users/?all=true"},fields:[]}},computed:{approveData:function(){var e=[];return e=2===this.value.length&&1===this.level?this.value.slice(0,this.level):1===this.value.length&&2===this.level?this.value.concat(this.defaultRule):this.value,e.forEach((function(e){e.assignees_read_only&&(e["assignees"]=e.assignees_read_only,delete e.assignees_read_only)})),e=e.sort((function(e,t){return e.level-t.level})),this.$emit("input",e),e}},mounted:function(){this.$emit("input",this.approveData)},methods:{onChange:function(){this.$emit("input",this.approveData)}}},c=u,d=(a("84e7"),a("2877")),p=Object(d["a"])(c,r,l,!1,null,null,null),v=p.exports,m={name:"FlowCreateUpdate",components:{GenericCreateUpdatePage:i["d"]},data:function(){var e=this;return{loading:!0,fields:[[this.$t("common.Basic"),["type"]],[this.$t("common.ApprovaLevel"),["approval_level","rules"]]],fieldsMeta:{type:{disabled:!0},rules:{label:this.$t("tickets.ApprovalProcess"),component:v,el:{level:1},hidden:function(t){e.fieldsMeta.rules.el.level=t["approval_level"]}}},getUrl:function(){var e=this.$route.params,t="/api/v1/tickets/flows/";return e.id&&(t="".concat(t).concat(e.id,"/")),"".concat(t)},cleanFormValue:function(e){return e["rules"]=e["rules"].slice(0,e["approval_level"]),e},onPerformError:function(){},updateSuccessNextRoute:{name:"TicketList"},createSuccessNextRoute:{name:"TicketList"}}},computed:{initial:function(){return this.$route.query}},mounted:function(){this.$store.state.users.profile.user_all_orgs.length>0&&(this.initial.org_id=this.$store.state.users.profile.user_all_orgs[0].id),this.loading=!1}},_=m,f=Object(d["a"])(_,s,n,!1,null,"4910bbf8",null);t["default"]=f.exports},"84e7":function(e,t,a){"use strict";var s=a("a099"),n=a.n(s);n.a},a099:function(e,t,a){}}]);