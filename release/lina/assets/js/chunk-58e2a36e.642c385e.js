(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58e2a36e"],{b662:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GenericDetailPage",{attrs:{submenu:e.submenu,object:e.sessionData,"active-menu":e.activeSubMenu,"has-right-side":!1,"get-object-name":e.getSessionName},on:{"update:object":function(t){e.sessionData=t},"update:activeMenu":function(t){e.activeSubMenu=t},"update:active-menu":function(t){e.activeSubMenu=t}}},[s("keep-alive",[s(e.activeSubMenu,{tag:"component",attrs:{object:e.sessionData}})],1)],1)},i=[],a=s("cd4a"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:16}},[s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})],1)],1)},r=[],c=s("579c"),l=s("d58a"),u=s("cf45"),d={name:"SessionCommands",components:{ListTable:c["a"]},data:function(){return{tableConfig:{hasSelection:!1,url:"/api/v1/terminal/commands/?session_id=".concat(this.$route.params.id),columns:["expandCol","index","input","timestamp"],columnsMeta:{expandCol:{type:"expand",formatter:l["a"]},index:{type:"index",label:"ID",sortable:"custom"},input:{label:this.$t("sessions.command"),sortable:"custom"},timestamp:{label:this.$t("sessions.date"),width:"160px",sortable:"custom",formatter:function(e){return Object(u["q"])(1e3*e.timestamp)}}}},headerActions:{hasExport:!1,hasImport:!1,hasRefresh:!1,hasCreate:!1,hasBulkDelete:!1,hasBulkUpdate:!1,hasLeftActions:!1,hasSearch:!1,hasRightActions:!1}}}},m=d,p=s("2877"),h=Object(p["a"])(m,o,r,!1,null,"815fc1e8",null),f=h.exports,b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:14}},[e.object?s("DetailCard",{attrs:{items:e.detailItems}}):e._e()],1),e._v(" "),s("el-col",{attrs:{span:10}},[e.object?s("QuickActions",{attrs:{type:"primary",actions:e.quickActions}}):e._e()],1)],1)},v=[],_=s("b97b"),y=s("8c34"),g=s("d952"),j={name:"SessionDetailInfo",components:{DetailCard:_["a"],QuickActions:y["a"]},props:{object:{type:Object,default:null}},data:function(){return{session:this.object}},computed:{onlineSessionActions:function(){var e=this;return[{title:this.$t("sessions.sessionTerminate"),attrs:{type:"danger",label:this.$t("sessions.terminate"),disabled:!this.session["can_terminate"]},callbacks:{click:function(){Object(g["g"])(e.session.id).then((function(t){var s=e.$t("sessions.TerminateTaskSendSuccessMsg");e.$message.success(s),window.setTimeout((function(){window.location.reload()}),5e4)}))}}},{title:this.$t("sessions.sessionMonitor"),attrs:{type:"primary",label:this.$t("sessions.Monitor"),disabled:!this.session["can_join"]},callbacks:{click:function(){var t="/luna/monitor/"+e.session.id;window.open(t,"height=600, width=800, top=400, left=400, toolbar=no, menubar=no, scrollbars=no, location=no, status=no")}}}]},offlineSessionActions:function(){var e=this;return[{title:this.$t("sessions.replaySession"),attrs:{type:"primary",label:this.$t("sessions.replay"),disabled:!this.session["can_replay"]},callbacks:{click:function(){var t="/luna/replay/"+e.session.id;window.open(t)}}},{title:this.$t("sessions.downloadReplay"),attrs:{type:"primary",label:this.$t("sessions.download"),disabled:!this.session["can_replay"]},callbacks:{click:function(){var t="/api/v1/terminal/sessions/".concat(e.session.id,"/replay/download/");window.open(t)}}}]},detailItems:function(){return[{key:this.$t("sessions.user"),value:this.session.user},{key:this.$t("sessions.asset"),value:this.session.asset},{key:this.$t("sessions.systemUser"),value:this.session.system_user},{key:this.$t("sessions.protocol"),value:this.session.protocol},{key:this.$t("sessions.loginFrom"),value:this.session.login_from},{key:this.$t("sessions.remoteAddr"),value:this.session.remote_addr},{key:this.$t("sessions.dateStart"),value:Object(u["q"])(this.session.date_start)},{key:this.$t("sessions.dateEnd"),value:this.session.date_end?Object(u["q"])(this.session.date_end):""}]},quickActions:function(){var e=this;return e.session.is_finished?this.offlineSessionActions:this.onlineSessionActions}}},k=j,S=Object(p["a"])(k,b,v,!1,null,"14a697c7",null),$=S.exports,w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},x=[],O={name:"SessionJoinRecords",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){return{tableConfig:{url:"/api/v1/terminal/session-join-records/?session=".concat(this.object.id),columns:["joiner_display","verify_code","reason","is_success","is_finished","date_joined","date_left","org_name"],columnsShow:{min:["joiner_display","is_success","reason"],default:["joiner_display","verify_code","is_success","reason","is_finished","date_joined","date_left"]},columnsMeta:{}},headerActions:{hasImport:!1,hasLeftActions:!1,searchConfig:{exclude:["date_joined","date_left"]}}}}},A=O,D=Object(p["a"])(A,w,x,!1,null,"a5ffda62",null),C=D.exports,M={name:"SessionDetail",components:{GenericDetailPage:a["e"],SessionCommands:f,SessionDetailInfo:$,SessionJoinRecords:C},data:function(){return{sessionData:{},activeSubMenu:"SessionDetailInfo",submenu:[{title:this.$t("route.Detail"),name:"SessionDetailInfo"},{title:this.$t("sessions.command"),name:"SessionCommands"},{title:this.$t("sessions.Activity"),name:"SessionJoinRecords"}]}},methods:{getSessionName:function(){return this.sessionData.id}}},I=M,E=Object(p["a"])(I,n,i,!1,null,"953ed934",null);t["default"]=E.exports},d58a:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("pre",{staticStyle:{border:"none",background:"none","white-space":"pre-wrap",padding:"10px 20px"}},[e._v(e._s("$ "+e.row.input)+"\n"),s("br"),e._v("\n"+e._s(e.row.output)+"\n  ")])},i=[],a=s("bb1a"),o={name:"OutputExpandFormatter",extends:a["a"]},r=o,c=s("2877"),l=Object(c["a"])(r,n,i,!1,null,"af1dcad0",null),u=l.exports;s.d(t,"a",(function(){return u}))},d952:function(e,t,s){"use strict";s.d(t,"g",(function(){return i})),s.d(t,"e",(function(){return a})),s.d(t,"f",(function(){return o})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return c})),s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d}));var n=s("b775");function i(e){return Object(n["a"])({url:"/api/v1/terminal/tasks/kill-session/",method:"post",data:e})}function a(){return Object(n["a"])({url:"/api/v1/terminal/command-storages/",method:"get"})}function o(){return Object(n["a"])({url:"/api/v1/terminal/replay-storages/",method:"get"})}function r(e){return Object(n["a"])({url:"/api/v1/terminal/command-storages/".concat(e,"/test-connective/"),method:"get"})}function c(e){return Object(n["a"])({url:"/api/v1/terminal/replay-storages/".concat(e,"/test-connective/"),method:"get"})}function l(e){return Object(n["a"])({url:e,method:"patch",data:{is_default:!0}})}function u(e){return l("/api/v1/terminal/command-storages/".concat(e,"/"))}function d(e){return l("/api/v1/terminal/replay-storages/".concat(e,"/"))}}}]);