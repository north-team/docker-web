(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6748a3fc"],{1:function(t,e){},"3cc2":function(t,e,s){},"82a0":function(t,e,s){"use strict";function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.open("/#/ops/celery/task/".concat(t,"/log/?type=").concat(e),"","width=900,height=600")}s.d(e,"a",(function(){return a}))},bdc3:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("GenericDetailPage",t._g(t._b({attrs:{object:t.systemUser,"active-menu":t.config.activeMenu},on:{"update:object":function(e){t.systemUser=e},"update:activeMenu":function(e){return t.$set(t.config,"activeMenu",e)},"update:active-menu":function(e){return t.$set(t.config,"activeMenu",e)}}},"GenericDetailPage",t.config,!1),t.$listeners),[s("keep-alive",[s(t.config.activeMenu,{tag:"component",attrs:{object:t.systemUser}})],1)],1)},o=[],c=s("cd4a"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:14}},[s("DetailCard",{attrs:{items:t.detailCardItems}})],1),t._v(" "),s("el-col",{attrs:{span:10}},[s("QuickActions",{attrs:{type:"primary",actions:t.quickActions}}),t._v(" "),"rdp"!==t.object.protocol&&"vnc"!==t.object.protocol?s("RelationCard",t._b({ref:"RelationCard",staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",t.nodeRelationConfig,!1)):t._e()],1)],1)},i=[],r=(s("7f7f"),s("20d6"),s("75fc")),l=(s("d25f"),s("6d67"),s("d92a"),s("57e7"),s("b97b")),u=s("8c34"),p=s("58fd"),d=s("cf45"),m={name:"Detail",components:{DetailCard:l["a"],QuickActions:u["a"],RelationCard:p["a"]},props:{object:{type:Object,default:function(){}}},data:function(){var t=this;return{quickActions:[{title:this.$t("assets.AutoPush"),type:"switcher",attrs:{label:this.$t("assets.AutoPush"),model:this.object.auto_push,disabled:-1===["rdp","ssh"].indexOf(this.object.protocol)||"admin"===this.object.type},callbacks:{change:function(t){var e=this;this.$axios.patch("/api/v1/assets/system-users/".concat(this.object.id,"/"),{auto_push:t}).then((function(t){e.$message.success(e.$t("common.updateSuccessMsg"))})).catch((function(t){e.$message.error(e.$t("common.updateErrorMsg "+t))}))}.bind(this)}}],nodeRelationConfig:{icon:"fa-info",hasObjectsId:this.object.cmd_filters,title:this.$t("assets.CmdFilter"),objectsAjax:{url:"/api/v1/assets/cmd-filters/"},performAdd:function(e){var s=t.object.id,a="/api/v1/assets/system-users/".concat(s,"/"),o=t.object.cmd_filters;e.map((function(t){return o.push(t.value)}));var c={cmd_filters:o};return t.$axios.patch(a,c)},performDelete:function(e){var s=t.object.id,a="/api/v1/assets/system-users/".concat(s,"/"),o=t.object.cmd_filters,c=o.filter((function(t){return t!==e.value})),n={cmd_filters:c};return t.$axios.patch(a,n)},onAddSuccess:function(e,s){t.$log.debug("Select value",s.select2.value),s.iHasObjects=[].concat(Object(r["a"])(s.iHasObjects),Object(r["a"])(e)),s.$refs.select2.clearSelected(),t.$message.success(t.$t("common.updateSuccessMsg"))},onDeleteSuccess:function(e,s){var a=s.iHasObjects.findIndex((function(t){return t.value===e.value}));s.iHasObjects.splice(a,1);while(-1!==s.select2.disabledValues.indexOf(e.value)){var o=s.select2.disabledValues.indexOf(e.value);t.$log.debug("disabled values remove index: ",o),s.select2.disabledValues.splice(o,1)}t.$message.success(t.$t("common.deleteSuccessMsg"))}}}},computed:{detailCardItems:function(){return[{key:this.$t("assets.Name"),value:this.object.name},{key:this.$t("assets.Type"),value:this.object.type_display},{key:this.$t("assets.Username"),value:this.object.username},{key:this.$t("assets.sshKeyFingerprint"),value:this.object["ssh_key_fingerprint"]},{key:this.$t("assets.Protocol"),value:this.object.protocol},{key:this.$t("assets.LoginModel"),value:this.object["login_mode_display"]},{key:"Sudo",value:this.object.sudo},{key:"Shell",value:this.object.shell},{key:this.$t("assets.date_joined"),value:Object(d["q"])(this.object.date_created)},{key:this.$t("assets.CreatedBy"),value:this.object.created_by}]}}},h=m,f=s("2877"),b=Object(f["a"])(h,n,i,!1,null,"4d01968e",null),v=b.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:16}},[s("ListTable",{ref:"ListTable",attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}})],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("QuickActions",{attrs:{type:"primary",actions:t.quickActions}}),t._v(" "),s("AssetRelationCard",t._b({ref:"assetSelect",staticStyle:{"margin-top":"15px"},attrs:{type:"primary"}},"AssetRelationCard",t.assetRelationConfig,!1)),t._v(" "),s("RelationCard",t._b({ref:"nodeRelation",staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",t.nodeRelationConfig,!1))],1)],1)],1)},$=[],g=s("bd1c"),j=s("579c"),A=s("e975"),_=s("e54e"),k=s("82a0"),T=s("9039"),C=s("2af9"),O={name:"AssetList",components:{Dialog:T["a"],QuickActions:u["a"],RelationCard:p["a"],AssetRelationCard:g["a"],ListTable:j["a"],Select2:C["k"]},props:{object:{type:Object,default:function(){}}},data:function(){var t=this,e=this;return{tableConfig:{url:"/api/v1/assets/system-users-assets-relations/?systemuser=".concat(this.object.id),columns:["asset_display","connectivity","actions"],columnsMeta:{asset_display:{label:this.$t("assets.Hostname"),showOverflowTooltip:!0,formatter:A["g"],formatterArgs:{getRoute:function(t){var e=t.row;return{name:"AssetDetail",params:{id:e.asset}}}}},connectivity:_["a"],actions:{formatterArgs:{hasUpdate:!1,hasDelete:!1,hasClone:!1,moreActionsTitle:this.$t("common.More"),extraActions:[{name:"Push",title:this.$t("common.Push"),type:"primary",can:this.object.auto_push,callback:function(s){var a=s.row,o="/api/v1/assets/system-users/".concat(e.object.id,"/tasks/"),c={action:"push",assets:[a.asset]};t.$axios.post(o,c).then((function(t){Object(k["a"])(t["task"])}))}},{name:"Delete",title:this.$t("common.Delete"),type:"danger",can:!this.$store.getters.currentOrgIsRoot,callback:function(e){t.$axios.delete("/api/v1/assets/system-users-assets-relations/".concat(e.row.id,"/")).then((function(){t.$message.success(t.$t("common.deleteSuccessMsg")),t.$refs.ListTable.reloadTable()}))}}]}}}},headerActions:{hasLeftActions:!0,hasBulkDelete:!1,hasImport:!1,hasExport:!0,hasCreate:!1,hasSearch:!0,hasMoreActions:!1,moreActionsTitle:this.$t("common.More"),moreActionsType:"primary",extraMoreActions:[{title:this.$t("common.PushSelected"),name:"PushSelected",can:function(t){var s=t.selectedRows;return s.length>0&&e.object.auto_push},callback:this.bulkPushCallback.bind(this)},{title:this.$t("assets.TestAssetsConnective"),name:"TestSelected",can:function(t){var e=t.selectedRows;return e.length>0},callback:this.bulkTestCallback.bind(this)}]},quickActions:[{title:this.$t("assets.TestAssetsConnective"),attrs:{type:"primary",label:this.$t("common.Test")},callbacks:{click:function(){this.$axios.post("/api/v1/assets/system-users/".concat(this.object.id,"/tasks/"),{action:"test"}).then((function(t){Object(k["a"])(t["task"])}))}.bind(this)}},{title:this.$t("assets.PushSystemUserNow"),attrs:{type:"primary",disabled:!e.object.auto_push,label:this.$t("common.Push")},callbacks:{click:function(t){t.row;var s="/api/v1/assets/system-users/".concat(e.object.id,"/tasks/"),a={action:"push"};this.$axios.post(s,a).then((function(t){Object(k["a"])(t["task"])}))}.bind(this)}}],nodeRelationConfig:{icon:"fa-link",title:this.$t("assets.AssociateNodes"),objectsAjax:{url:"/api/v1/assets/nodes/",transformOption:function(t){return{label:t.full_value,value:t.id}}},hasObjectsId:this.object.nodes,performAdd:function(e){var s="/api/v1/assets/system-users-nodes-relations/",a=t.object.id,o=e.map((function(t){return{systemuser:a,node:t.value}}));return 0===o.length?t.$message.error(t.$t("assets.UnselectedNodes")):t.$axios.post(s,o)},performDelete:function(e){var s=e.value,a=t.object.id,o="/api/v1/assets/system-users-nodes-relations/?systemuser=".concat(a,"&node=").concat(s);return t.$axios.delete(o)},onAddSuccess:function(s,a){a.iHasObjects=[].concat(Object(r["a"])(a.iHasObjects),Object(r["a"])(s)),e.$refs.nodeRelation.$refs.select2.clearSelected(),t.$message.success(t.$t("common.updateSuccessMsg")),e.$refs.ListTable.reloadTable()}},assetRelationConfig:{icon:"fa-link",title:this.$t("assets.AssociateAssets"),disabled:this.$store.getters.currentOrgIsRoot,performAdd:function(e,s){var a="/api/v1/assets/system-users-assets-relations/",o=e.map((function(e){return{asset:e,systemuser:t.object.id}}));return 0===o.length?t.$message.error(t.$tc("assets.UnselectedAssets")):t.$axios.post(a,o)},onAddSuccess:function(s,a){t.$log.debug("AssetSelect value",a.assets),t.$message.success(t.$t("common.updateSuccessMsg")),e.$refs.ListTable.reloadTable(),a.$refs.assetSelect.$refs.select2.clearSelected()}}}},methods:{bulkPushCallback:function(t){var e=t.selectedRows,s="/api/v1/assets/system-users/".concat(this.object.id,"/tasks/"),a=e.map((function(t){return t.asset})),o={action:"push",assets:a};this.$axios.post(s,o).then((function(t){Object(k["a"])(t["task"])}))},bulkTestCallback:function(t){var e=t.selectedRows,s="/api/v1/assets/system-users/".concat(this.object.id,"/tasks/"),a=e.map((function(t){return t.asset})),o={action:"test",assets:a};this.$axios.post(s,o).then((function(t){Object(k["a"])(t["task"])}))}}},S=O,w=Object(f["a"])(S,y,$,!1,null,"2f927511",null),L=w.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20}},[s("AccountListTable",{ref:"ListTable",attrs:{url:t.accountUrl,"has-import":!1,"has-clone":!1}})],1),t._v(" "),s("el-col",{attrs:{span:4}})],1)},R=[],U={name:"AccountList",components:{AccountListTable:C["a"]},props:{object:{type:Object,default:function(){}}},data:function(){return{accountUrl:"/api/v1/assets/accounts/?systemuser=".concat(this.object.id)}},computed:{}},D=U,M=Object(f["a"])(D,x,R,!1,null,"96642882",null),P=M.exports,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:16}},[s("ListTable",{ref:"ListTable",attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}})],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("RelationCard",t._b({ref:"assetSelect",staticStyle:{"margin-top":"15px"},attrs:{type:"primary"}},"RelationCard",t.appRelationConfig,!1))],1)],1)],1)},H=[],E=(s("ac4d"),s("8a81"),s("ac6a"),{name:"AssetList",components:{RelationCard:p["a"],ListTable:j["a"]},props:{object:{type:Object,default:function(){}}},data:function(){var t=this,e=this;return{tableConfig:{name:"AppList",url:"/api/v1/applications/accounts/?systemuser=".concat(this.object.id),columns:["app_display","actions"],columnsMeta:{app_display:{label:this.$t("applications.App"),showOverflowTooltip:!0,formatter:A["g"],formatterArgs:{getRoute:function(t){var e=t.row,s={remote_app:"RemoteAppDetail",db:"DatabaseAppDetail",cloud:"KubernetesAppDetail"},a=s[e.category];return{name:a,params:{id:e.app}}}}},actions:{formatterArgs:{hasUpdate:!1,hasDelete:!1,hasClone:!1,moreActionsTitle:this.$t("common.More"),extraActions:[{name:"Delete",title:this.$t("common.Delete"),type:"danger",can:!this.$store.getters.currentOrgIsRoot,callback:function(e){t.$axios.delete("/api/v1/applications/accounts/".concat(e.row.id,"/")).then((function(){t.$message.success(t.$t("common.deleteSuccessMsg")),t.$refs.ListTable.reloadTable()}))}}]}}}},headerActions:{hasLeftActions:!1,hasBulkDelete:!1,hasImport:!1,hasCreate:!1},appRelationConfig:{icon:"fa-edit",title:this.$t("applications.associateApplication"),disabled:this.$store.getters.currentOrgIsRoot,objectsAjax:{url:"/api/v1/applications/applications/?type=".concat(e.object.protocol),transformOption:function(t){return{label:t.name+" ("+t.type_display+")",value:t.id}}},showHasObjects:!1,performAdd:function(e){var s=t.object.id,a="/api/v1/applications/accounts/",o=e.map((function(t){return t.value})),c=[],n=!0,i=!1,r=void 0;try{for(var l,u=o[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var p=l.value;c.push({systemuser:s,app:p})}}catch(d){i=!0,r=d}finally{try{n||null==u.return||u.return()}finally{if(i)throw r}}return t.$axios.post(a,c)},onAddSuccess:function(e,s){t.$log.debug("Select value",s.select2.value),s.iHasObjects=[].concat(Object(r["a"])(s.iHasObjects),Object(r["a"])(e)),s.$refs.select2.clearSelected(),t.$message.success(t.$t("common.updateSuccessMsg")),t.$refs.ListTable.reloadTable()}}}},methods:{}}),q=E,Q=Object(f["a"])(q,I,H,!1,null,"7cc071fa",null),B=Q.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20}},[s("AppAccountListTable",{ref:"ListTable",attrs:{url:t.accountUrl,"has-import":!1,"has-clone":!1}})],1),t._v(" "),s("el-col",{attrs:{span:4}})],1)},G=[],V={name:"AccountList",components:{AppAccountListTable:C["c"]},props:{object:{type:Object,default:function(){}}},data:function(){return{accountUrl:"/api/v1/applications/accounts/?systemuser=".concat(this.object.id)}}},F=V,J=Object(f["a"])(F,N,G,!1,null,"40ebc69c",null),K=J.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-alert",{attrs:{type:"info"}},[s("b",[t._v(t._s(t.Tips.title))]),t._v(": "),s("span",[t._v(t._s(t.Tips.body))])]),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20}},[s("ListTable",{ref:"ListTable",attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}})],1),t._v(" "),s("el-col",{attrs:{span:4}})],1)],1)},W=[],X={name:"SwitchToUserList",components:{ListTable:j["a"]},props:{object:{type:Object,default:function(){}}},data:function(){return{Tips:{title:this.$t("common.Info"),body:this.$t("assets.SwitchToUserListTips")},tableConfig:{url:"/api/v1/assets/system-users/".concat(this.object.id,"/su-to/"),columns:["name","username","username_same_with_user","protocol","login_mode","assets_amount","applications_amount","priority","created_by","date_created","date_updated","comment","org_name","actions"],columnsShow:{min:["name","actions"],default:["name","username","protocol","login_mode","comment","actions"]},columnsMeta:{actions:{formatterArgs:{updateRoute:{name:"SystemUserUpdate",query:{id:this.$route.params.id}},hasUpdate:!0,hasDelete:!1,hasClone:!1,moreActionsTitle:this.$t("common.More"),extraActions:[]}}}},headerActions:{hasLeftActions:!1,hasBulkDelete:!1,hasImport:!1,hasCreate:!1,searchConfig:{exclude:["type","protocol"]}}}},methods:{}},Y=X,Z=Object(f["a"])(Y,z,W,!1,null,"381afeba",null),tt=Z.exports,et={components:{GenericDetailPage:c["e"],TabPage:c["m"],Detail:v,AssetList:L,AccountList:P,AppList:B,AppAccountList:K,SwitchToUserList:tt},data:function(){var t=this,e=this;return{systemUser:{},config:{activeMenu:"Detail",submenu:[{title:this.$t("assets.SystemUserDetail"),name:"Detail"},{title:this.$t("assets.AssetList"),name:"AssetList",hidden:function(){return!e.systemUser["is_asset_protocol"]}},{title:this.$t("assets.AccountList"),name:"AccountList",hidden:function(){return!e.systemUser["is_asset_protocol"]}},{title:this.$t("assets.AppList"),name:"AppList",hidden:function(){return e.systemUser["is_asset_protocol"]}},{title:this.$t("assets.AccountList"),name:"AppAccountList",hidden:function(){return e.systemUser["is_asset_protocol"]}},{title:this.$t("assets.SwitchToUser"),name:"SwitchToUserList",hidden:function(){return"ssh"!==e.systemUser["protocol"]}}],hasRightSide:!0,actions:{updateCallback:function(){var s=t.$route.params.id,a="SystemUserUpdate";t.$router.push({name:a,params:{id:s},query:{type:e.systemUser.type,protocol:e.systemUser.protocol}})}}}}}},st=et,at=Object(f["a"])(st,a,o,!1,null,"3d56c4e7",null);e["default"]=at.exports},c0eb:function(t,e,s){"use strict";var a=s("1157"),o=s.n(a);window.$=o.a,window.jQuery=o.a,e["a"]=o.a}}]);