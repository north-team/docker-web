(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb8c48b0"],{"3cc2":function(e,s,t){},"4b97":function(e,s,t){"use strict";t.r(s);var a,i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("GenericDetailPage",e._g(e._b({attrs:{object:e.AssetPermission,"active-menu":e.config.activeMenu},on:{"update:object":function(s){e.AssetPermission=s},"update:activeMenu":function(s){return e.$set(e.config,"activeMenu",s)},"update:active-menu":function(s){return e.$set(e.config,"activeMenu",s)},"tab-click":e.TabClick}},"GenericDetailPage",e.config,!1),e.$listeners),[t("keep-alive",[t(e.config.activeMenu,{tag:"component",attrs:{object:e.AssetPermission}})],1)],1)},o=[],n=(t("7f7f"),t("cd4a")),r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:14,sm:24}},[t("DetailCard",{attrs:{items:e.detailCardItems}})],1),e._v(" "),t("el-col",{attrs:{md:10,sm:24}},[t("QuickActions",{attrs:{type:"primary",actions:e.quickActions}})],1)],1)},c=[],l=(t("6d67"),t("d92a"),t("b97b")),u=t("8c34"),d=t("cf45"),m=t("bd86"),p=t("0692"),b="all",f="connect",h="upload_file",v="download_file",j="updownload",g="clipboard_copy",$="clipboard_paste",_="clipboard_copy_paste",A=(a={},Object(m["a"])(a,b,{name:b,action:p["a"].t("perms.all")}),Object(m["a"])(a,f,{name:f,action:p["a"].t("perms.connect")}),Object(m["a"])(a,h,{name:h,action:p["a"].t("perms.uploadFile")}),Object(m["a"])(a,v,{name:v,action:p["a"].t("perms.downloadFile")}),Object(m["a"])(a,j,{name:j,action:p["a"].t("perms.upDownload")}),Object(m["a"])(a,g,{name:g,action:p["a"].t("perms.clipboardCopy")}),Object(m["a"])(a,$,{name:$,action:p["a"].t("perms.clipboardPaste")}),Object(m["a"])(a,_,{name:_,action:p["a"].t("perms.clipboardCopyPaste")}),a),O={name:"AssetPermissionDetail",components:{DetailCard:l["a"],QuickActions:u["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){return{quickActions:[{title:this.$t("common.Active"),type:"switcher",attrs:{model:this.object.is_active},callbacks:{change:function(e){var s=this;this.$axios.patch("/api/v1/perms/asset-permissions/".concat(this.object.id,"/"),{is_active:e}).then((function(e){s.$message.success(s.$t("common.updateSuccessMsg"))})).catch((function(e){s.$message.error(s.$t("common.updateErrorMsg "+e))}))}.bind(this)}}]}},computed:{detailCardItems:function(){this.$createElement;return[{key:this.$t("common.Name"),value:this.object.name},{key:this.$t("perms.userCount"),value:this.object.users_amount},{key:this.$t("perms.userGroupCount"),value:this.object.user_groups_amount},{key:this.$t("perms.assetCount"),value:this.object.assets_amount},{key:this.$t("perms.nodeCount"),value:this.object.nodes_amount},{key:this.$t("perms.systemUserCount"),value:this.object.system_users_amount},{key:this.$t("perms.Actions"),value:this.object.actions,formatter:function(e,s){var t=this.$createElement,a=s.map((function(e){return A[e].action})).join(",");return t("span",[a])}},{key:this.$t("perms.dateStart"),value:Object(d["q"])(this.object.date_start)},{key:this.$t("common.dateExpired"),value:Object(d["q"])(this.object.date_expired)},{key:this.$t("common.dateCreated"),value:Object(d["q"])(this.object.date_created)},{key:this.$t("common.createdBy"),value:this.object.created_by},{key:this.$t("common.Comment"),value:this.object.comment}]}}},y=O,C=t("2877"),x=Object(C["a"])(y,r,c,!1,null,"3b13b6e7",null),S=x.exports,T=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:14,sm:24}},[t("ListTable",{ref:"ListTable",attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})],1),e._v(" "),t("el-col",{attrs:{md:10,sm:24}},[t("RelationCard",e._b({attrs:{type:"primary"}},"RelationCard",e.userRelationConfig,!1)),e._v(" "),t("RelationCard",e._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",e.groupRelationConfig,!1))],1)],1)},R=[],w=(t("57e7"),t("20d6"),t("75fc")),P=t("579c"),k=t("58fd"),M=t("e975"),D={name:"AssetPermissionUser",components:{ListTable:P["a"],RelationCard:k["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{tableConfig:{url:"/api/v1/perms/asset-permissions/".concat(this.object.id,"/users/all/"),columns:["user_display","delete_action"],columnsMeta:{user_display:{label:this.$t("perms.User"),align:"center"},delete_action:{prop:"user",label:this.$t("common.Actions"),align:"center",width:150,objects:this.object.users,formatter:M["f"],deleteUrl:"/api/v1/perms/asset-permissions-users-relations/?assetpermission=".concat(this.object.id,"&user=")}},tableAttrs:{border:!1}},headerActions:{hasSearch:!0,hasRefresh:!0,hasExport:!1,hasImport:!1,hasCreate:!1,hasMoreActions:!1},userRelationConfig:{icon:"fa-user",title:this.$t("perms.addUserToThisPermission"),objectsAjax:{url:"/api/v1/users/users/?fields_size=mini&order=name",transformOption:function(e){return{label:e.name+"("+e.username+")",value:e.id}}},showHasMore:!1,hasObjectsId:this.object.users,showHasObjects:!1,performAdd:function(s){var t="/api/v1/perms/asset-permissions-users-relations/",a=e.object.id,i=s.map((function(e){return{user:e.value,assetpermission:a}}));return e.$axios.post(t,i)},onAddSuccess:function(s,t){e.$log.debug("Select value",t.select2.value),t.iHasObjects=[].concat(Object(w["a"])(t.iHasObjects),Object(w["a"])(s)),t.$refs.select2.clearSelected(),e.$message.success(e.$t("common.updateSuccessMsg")),e.$refs.ListTable.reloadTable()}},groupRelationConfig:{icon:"fa-group",title:this.$t("perms.addUserGroupToThisPermission"),objectsAjax:{url:"/api/v1/users/groups/"},hasObjectsId:this.object.user_groups,performAdd:function(s){var t="/api/v1/perms/asset-permissions-user-groups-relations/",a=e.object.id,i=s.map((function(e){return{assetpermission:a,usergroup:e.value}}));return e.$axios.post(t,i)},performDelete:function(s){var t=e.object.id,a=s.value,i="/api/v1/perms/asset-permissions-user-groups-relations/?assetpermission=".concat(t,"&usergroup=").concat(a);return e.$axios.delete(i)},onAddSuccess:function(s,t){e.$log.debug("Select value",t.select2.value),t.iHasObjects=[].concat(Object(w["a"])(t.iHasObjects),Object(w["a"])(s)),t.$refs.select2.clearSelected(),e.$message.success(e.$t("common.updateSuccessMsg")),e.$refs.ListTable.reloadTable()},onDeleteSuccess:function(s,t){var a=t.iHasObjects.findIndex((function(e){return e.value===s.value}));t.iHasObjects.splice(a,1);while(-1!==t.select2.disabledValues.indexOf(s.value)){var i=t.select2.disabledValues.indexOf(s.value);e.$log.debug("disabled values remove index: ",i),t.select2.disabledValues.splice(i,1)}e.$message.success(e.$t("common.deleteSuccessMsg")),e.$refs.ListTable.reloadTable()}}}}},H=D,I=Object(C["a"])(H,T,R,!1,null,"0a19dc3e",null),L=I.exports,U=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:14,sm:24}},[t("ListTable",{ref:"ListTable",attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions,"class-":""}})],1),e._v(" "),t("el-col",{attrs:{md:10,sm:24}},[t("AssetRelationCard",e._b({attrs:{type:"primary"}},"AssetRelationCard",e.assetRelationConfig,!1)),e._v(" "),t("RelationCard",e._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",e.nodeRelationConfig,!1)),e._v(" "),t("RelationCard",e._b({staticStyle:{"margin-top":"15px"},attrs:{type:"warning"}},"RelationCard",e.systemUserRelationConfig,!1))],1)],1)},E=[],V=t("bd1c"),G={name:"AssetPermissionAsset",components:{ListTable:P["a"],RelationCard:k["a"],AssetRelationCard:V["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{tableConfig:{url:"/api/v1/perms/asset-permissions/".concat(this.object.id,"/assets/all/"),columns:["asset_display","delete_action"],columnsMeta:{asset_display:{label:this.$t("perms.Asset"),align:"center"},delete_action:{prop:"asset",label:this.$t("common.Actions"),align:"center",width:150,objects:this.object.assets,formatter:M["f"],deleteUrl:"/api/v1/perms/asset-permissions-assets-relations/?assetpermission=".concat(this.object.id,"&asset=")}},tableAttrs:{border:!1}},headerActions:{hasSearch:!0,hasRefresh:!0,hasLeftActions:!0,hasRightActions:!0,hasExport:!1,hasImport:!1,hasCreate:!1,hasMoreActions:!1},assetRelationConfig:{icon:"fa-edit",title:this.$t("perms.addAssetToThisPermission"),hasObjectsId:this.object.assets,disabled:this.$store.getters.currentOrgIsRoot,canSelect:function(s,t){return-1===e.object.assets.indexOf(s.id)},performAdd:function(s,t){var a="/api/v1/perms/asset-permissions-assets-relations/",i=e.object.id,o=s.map((function(e){return{assetpermission:i,asset:e}}));return e.$axios.post(a,o)},onAddSuccess:function(s,t){e.$log.debug("AssetSelect value",t.assets),e.$message.success(e.$t("common.updateSuccessMsg")),e.$refs.ListTable.reloadTable(),t.$refs.assetSelect.$refs.select2.clearSelected(),window.location.reload()}},nodeRelationConfig:{icon:"fa-edit",title:this.$t("perms.addNodeToThisPermission"),objectsAjax:{url:"/api/v1/assets/nodes/",transformOption:function(e){return{label:e.full_value,value:e.id}}},hasObjectsId:this.object.nodes,performAdd:function(s){var t="/api/v1/perms/asset-permissions-nodes-relations/",a=e.object.id,i=s.map((function(e){return{assetpermission:a,node:e.value}}));return e.$axios.post(t,i)},onAddSuccess:function(s,t){e.$log.debug("Select value",t.select2.value),t.iHasObjects=[].concat(Object(w["a"])(t.iHasObjects),Object(w["a"])(s)),t.$refs.select2.clearSelected(),e.$message.success(e.$t("common.updateSuccessMsg")),e.$refs.ListTable.reloadTable()},performDelete:function(s){var t=s.value,a=e.object.id,i="/api/v1/perms/asset-permissions-nodes-relations/?assetpermission=".concat(a,"&node=").concat(t);return e.$axios.delete(i)},onDeleteSuccess:function(s,t){var a=t.iHasObjects.findIndex((function(e){return e.value===s.value}));t.iHasObjects.splice(a,1);while(-1!==t.select2.disabledValues.indexOf(s.value)){var i=t.select2.disabledValues.indexOf(s.value);e.$log.debug("disabled values remove index: ",i),t.select2.disabledValues.splice(i,1)}e.$message.success(e.$t("common.deleteSuccessMsg")),e.$refs.ListTable.reloadTable()}},systemUserRelationConfig:{icon:"fa-edit",title:this.$t("perms.addSystemUserToThisPermission"),objectsAjax:{url:"/api/v1/assets/system-users/?protocol__in=rdp,ssh,vnc,telnet",transformOption:function(e){var s=e.username||"*";return{label:e.name+"("+s+")",value:e.id}}},hasObjectsId:this.object.system_users,performAdd:function(s){var t="/api/v1/perms/asset-permissions-system-users-relations/",a=e.object.id,i=s.map((function(e){return{assetpermission:a,systemuser:e.value}}));return e.$axios.post(t,i)},onAddSuccess:function(s,t){e.$log.debug("Select value",t.select2.value),t.iHasObjects=[].concat(Object(w["a"])(t.iHasObjects),Object(w["a"])(s)),t.$refs.select2.clearSelected(),e.$message.success(e.$t("common.updateSuccessMsg"))},performDelete:function(s){var t=s.value,a=e.object.id,i="/api/v1/perms/asset-permissions-system-users-relations/?assetpermission=".concat(a,"&systemuser=").concat(t);return e.$axios.delete(i)},onDeleteSuccess:function(s,t){var a=t.iHasObjects.findIndex((function(e){return e.value===s.value}));t.iHasObjects.splice(a,1);while(-1!==t.select2.disabledValues.indexOf(s.value)){var i=t.select2.disabledValues.indexOf(s.value);e.$log.debug("disabled values remove index: ",i),t.select2.disabledValues.splice(i,1)}e.$message.success(e.$t("common.deleteSuccessMsg"))}}}}},q=G,N=Object(C["a"])(q,U,E,!1,null,"0862c62a",null),Q=N.exports,B={components:{GenericDetailPage:n["e"],AssetPermissionDetail:S,AssetPermissionUser:L,AssetPermissionAsset:Q,TabPage:n["m"]},data:function(){return{AssetPermission:{name:"",users_amount:0,user_groups_amount:0,assets_amount:0,nodes_amount:0,system_users_amount:0,date_start:"",date_expired:""},config:{activeMenu:"AssetPermissionDetail",submenu:[{title:this.$t("common.BasicInfo"),name:"AssetPermissionDetail"},{title:this.$t("perms.usersAndUserGroups"),name:"AssetPermissionUser"},{title:this.$t("perms.assetAndNode"),name:"AssetPermissionAsset"}]}}},methods:{TabClick:function(e){"AssetPermissionDetail"!==e.name?this.$set(this.config,"hasRightSide",!1):this.$set(this.config,"hasRightSide",!0)}}},F=B,J=Object(C["a"])(F,i,o,!1,null,"6d8dffb4",null);s["default"]=J.exports},c0eb:function(e,s,t){"use strict";var a=t("1157"),i=t.n(a);window.$=i.a,window.jQuery=i.a,s["a"]=i.a}}]);